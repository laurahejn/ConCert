<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<link href="toc.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
      <span id="toggle-toc">Contents</span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/AU-COBRA/ConCert" target="_balnk">Project Page</a>
      <a href="index.html">Index</a>
      <a href="toc.html">Table of contents</a>
    </span>
</div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="js-toc" class="toc" data-toc="h1,h2,h3,h4" data-toc-container="doc" data-toc-offset="-40">
      <div id="js-toc-header" class="toc-header">Contents:</div>
    </div>
    <div id="main">
<h1 class="libtitle">Library ConCert.Examples.Crowdfunding.CrowdfundingCorrect</h1>

<div class="code">
</div>

<div class="doc">
We develop a deep embedding of a crowdfunding contract and prove some of its
     functional correctness properties using the corresponding shallow embedding 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Embedding.Notations.html#"><span class="id" title="library">Notations</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Embedding.Prelude.html#"><span class="id" title="library">Prelude</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Embedding</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#"><span class="id" title="library">SimpleBlockchain</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Examples.Crowdfunding</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#"><span class="id" title="library">CrowdfundingData</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Examples.Crowdfunding</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#"><span class="id" title="library">Crowdfunding</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Utils.Automation.html#"><span class="id" title="library">Automation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#"><span class="id" title="library">ssrbool</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps"><span class="id" title="module">Prelude.Maps</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract"><span class="id" title="module">CrowdfundingContract</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab165"></a><h1 class="section">Properties of the crowdfunding contract</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="CrowdfundingProperties" class="idref" href="#CrowdfundingProperties"><span class="id" title="module">CrowdfundingProperties</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain"><span class="id" title="module">AcornBlockchain</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">split_andb</span> := <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a>; <span class="id" title="tactic">split</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.deadline_passed" class="idref" href="#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a id="now:1" class="idref" href="#now:1"><span class="id" title="binder">now</span></a> (<a id="s:2" class="idref" href="#s:2"><span class="id" title="binder">s</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a>) := <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#s:2"><span class="id" title="variable">s</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#deadline_coq"><span class="id" title="projection">deadline_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#now:1"><span class="id" title="variable">now</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.goal_reached" class="idref" href="#CrowdfundingProperties.goal_reached"><span class="id" title="definition">goal_reached</span></a> (<a id="s:3" class="idref" href="#s:3"><span class="id" title="binder">s</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a>) := (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#s:3"><span class="id" title="variable">s</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#goal_coq"><span class="id" title="projection">goal_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#s:3"><span class="id" title="variable">s</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#balance_coq"><span class="id" title="projection">balance_coq</span></a>))%<span class="id" title="var">Z</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.funded" class="idref" href="#CrowdfundingProperties.funded"><span class="id" title="definition">funded</span></a> <a id="now:4" class="idref" href="#now:4"><span class="id" title="binder">now</span></a> (<a id="s:5" class="idref" href="#s:5"><span class="id" title="binder">s</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#now:4"><span class="id" title="variable">now</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#s:5"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.goal_reached"><span class="id" title="definition">goal_reached</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#s:5"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.not_leb" class="idref" href="#CrowdfundingProperties.not_leb"><span class="id" title="lemma">not_leb</span></a> <a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a> <a id="m:7" class="idref" href="#m:7"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:6"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:7"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:7"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:6"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb"><span class="id" title="definition">Nat.ltb</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">Bool.negb_true_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_gt"><span class="id" title="lemma">Nat.leb_gt</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.not_ltb" class="idref" href="#CrowdfundingProperties.not_ltb"><span class="id" title="lemma">not_ltb</span></a> <a id="n:8" class="idref" href="#n:8"><span class="id" title="binder">n</span></a> <a id="m:9" class="idref" href="#m:9"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:8"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:9"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:9"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:8"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb"><span class="id" title="definition">Nat.ltb</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">Bool.negb_true_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_gt"><span class="id" title="lemma">Nat.leb_gt</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.Znot_leb" class="idref" href="#CrowdfundingProperties.Znot_leb"><span class="id" title="lemma">Znot_leb</span></a> <a id="n:10" class="idref" href="#n:10"><span class="id" title="binder">n</span></a> <a id="m:11" class="idref" href="#m:11"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:10"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:11"><span class="id" title="variable">m</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:11"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:10"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">Bool.negb_true_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb_gt"><span class="id" title="lemma">Z.leb_gt</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.ltb_lt"><span class="id" title="lemma">Z.ltb_lt</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.Znot_ltb" class="idref" href="#CrowdfundingProperties.Znot_ltb"><span class="id" title="lemma">Znot_ltb</span></a> <a id="n:12" class="idref" href="#n:12"><span class="id" title="binder">n</span></a> <a id="m:13" class="idref" href="#m:13"><span class="id" title="binder">m</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:12"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:13"><span class="id" title="variable">m</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:13"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n:12"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">Bool.negb_true_iff</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.ltb_nlt"><span class="id" title="lemma">Z.ltb_nlt</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb_le"><span class="id" title="lemma">Z.leb_le</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma states that the only relevant part of the blockchain state is the current slot,
      because we check if the deadline have passed by comparing the deadline recoded in the
      internal state with the current slot number.
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.receive_blockchain_state" class="idref" href="#CrowdfundingProperties.receive_blockchain_state"><span class="id" title="lemma">receive_blockchain_state</span></a> <a id="height1:14" class="idref" href="#height1:14"><span class="id" title="binder">height1</span></a> <a id="height2:15" class="idref" href="#height2:15"><span class="id" title="binder">height2</span></a> <a id="cur_slot:16" class="idref" href="#cur_slot:16"><span class="id" title="binder">cur_slot</span></a> <a id="fheight1:17" class="idref" href="#fheight1:17"><span class="id" title="binder">fheight1</span></a> <a id="fheight2:18" class="idref" href="#fheight2:18"><span class="id" title="binder">fheight2</span></a> <a id="msg:19" class="idref" href="#msg:19"><span class="id" title="binder">msg</span></a> <a id="st:20" class="idref" href="#st:20"><span class="id" title="binder">st</span></a> <a id="ctx:21" class="idref" href="#ctx:21"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> (<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Build_chain_coq"><span class="id" title="constructor">Build_chain_coq</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#height1:14"><span class="id" title="variable">height1</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#cur_slot:16"><span class="id" title="variable">cur_slot</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fheight1:17"><span class="id" title="variable">fheight1</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#ctx:21"><span class="id" title="variable">ctx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#msg:19"><span class="id" title="variable">msg</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#st:20"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> (<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Build_chain_coq"><span class="id" title="constructor">Build_chain_coq</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#height2:15"><span class="id" title="variable">height2</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#cur_slot:16"><span class="id" title="variable">cur_slot</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fheight2:18"><span class="id" title="variable">fheight2</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#ctx:21"><span class="id" title="variable">ctx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#msg:19"><span class="id" title="variable">msg</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#st:20"><span class="id" title="variable">st</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">msg</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[(<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span> )] ] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This function is a simplistic execution environment that performs one step of execution 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.run" class="idref" href="#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a> (<a id="receive:22" class="idref" href="#receive:22"><span class="id" title="binder">receive</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.SimpleActionBody_coq"><span class="id" title="inductive">SimpleActionBody_coq</span></a>)) (<a id="init:23" class="idref" href="#init:23"><span class="id" title="binder">init</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.SimpleActionBody_coq"><span class="id" title="inductive">SimpleActionBody_coq</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#receive:22"><span class="id" title="variable">receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:23"><span class="id" title="variable">init</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">out</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">fin</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">out</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:23"><span class="id" title="variable">init</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="comment">(*&nbsp;if&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;the&nbsp;state&nbsp;remains&nbsp;the&nbsp;same&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A wrapper for the assertions about the contract execution 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.assertion" class="idref" href="#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a> (<a id="pre:24" class="idref" href="#pre:24"><span class="id" title="binder">pre</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="entry:25" class="idref" href="#entry:25"><span class="id" title="binder">entry</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.SimpleActionBody_coq"><span class="id" title="inductive">SimpleActionBody_coq</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="post:26" class="idref" href="#post:26"><span class="id" title="binder">post</span></a> : <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#State_coq"><span class="id" title="record">State_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.SimpleActionBody_coq"><span class="id" title="inductive">SimpleActionBody_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="init:27" class="idref" href="#init:27"><span class="id" title="binder">init</span></a>, <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#pre:24"><span class="id" title="variable">pre</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:27"><span class="id" title="variable">init</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="fin:28" class="idref" href="#fin:28"><span class="id" title="binder">fin</span></a> <a id="out:29" class="idref" href="#out:29"><span class="id" title="binder">out</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#entry:25"><span class="id" title="variable">entry</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:27"><span class="id" title="variable">init</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:28"><span class="id" title="variable">fin</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:29"><span class="id" title="variable">out</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#post:26"><span class="id" title="variable">post</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:28"><span class="id" title="variable">fin</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:29"><span class="id" title="variable">out</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="1b3c9204bd2687e4af324543ba919951" class="idref" href="#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">&quot;</span></a>{{ P }} c {{ Q }}" := (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a> <span class="id" title="var">P</span> <span class="id" title="var">c</span> <span class="id" title="var">Q</span>)( <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
The donations can be paid back to the backers if the goal is not
      reached within a deadline 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.get_money_back_guarantee" class="idref" href="#CrowdfundingProperties.get_money_back_guarantee"><span class="id" title="lemma">get_money_back_guarantee</span></a> <a id="CallCtx:30" class="idref" href="#CallCtx:30"><span class="id" title="binder">CallCtx</span></a> <a id="BC:31" class="idref" href="#BC:31"><span class="id" title="binder">BC</span></a> (<a id="sender:32" class="idref" href="#sender:32"><span class="id" title="binder">sender</span></a> := <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:30"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Ctx_from"><span class="id" title="projection">Ctx_from</span></a>)) <a id="v:33" class="idref" href="#v:33"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pre-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="init:34" class="idref" href="#init:34"><span class="id" title="binder">init</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:31"><span class="id" title="variable">BC</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:34"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.goal_reached"><span class="id" title="definition">goal_reached</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:34"><span class="id" title="variable">init</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:34"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:34"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sender:32"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:33"><span class="id" title="variable">v</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;contract&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:31"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:30"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#Claim_coq"><span class="id" title="constructor">Claim_coq</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;post-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a><span class="id" title="keyword">fun</span> <a id="fin:35" class="idref" href="#fin:35"><span class="id" title="binder">fin</span></a> <a id="out:36" class="idref" href="#out:36"><span class="id" title="binder">out</span></a> =&gt; <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:35"><span class="id" title="variable">fin</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sender:32"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> 0%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Act_transfer"><span class="id" title="constructor">Act_transfer</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sender:32"><span class="id" title="variable">sender</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:33"><span class="id" title="variable">v</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:36"><span class="id" title="variable">out</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdl</span> [<span class="id" title="var">Hgoal</span> [<span class="id" title="var">Hndone</span> <span class="id" title="var">Hlook</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.goal_reached"><span class="id" title="definition">goal_reached</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#balance_coq"><span class="id" title="projection">balance_coq</span></a> <span class="id" title="var">init</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#goal_coq"><span class="id" title="projection">goal_coq</span></a> <span class="id" title="var">init</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.Znot_leb"><span class="id" title="lemma">Znot_leb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">Z</span>; <span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">bool</span>; <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlook</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map_add"><span class="id" title="lemma">lookup_map_add</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
New donations are recorded correctly in the contract's state 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.new_donation_correct" class="idref" href="#CrowdfundingProperties.new_donation_correct"><span class="id" title="lemma">new_donation_correct</span></a> <a id="CallCtx:37" class="idref" href="#CallCtx:37"><span class="id" title="binder">CallCtx</span></a> <a id="BC:38" class="idref" href="#BC:38"><span class="id" title="binder">BC</span></a> (<a id="sender:39" class="idref" href="#sender:39"><span class="id" title="binder">sender</span></a> := <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:37"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Ctx_from"><span class="id" title="projection">Ctx_from</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="donation:40" class="idref" href="#donation:40"><span class="id" title="binder">donation</span></a> := <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:37"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Ctx_amount"><span class="id" title="projection">Ctx_amount</span></a>)) :<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="init:41" class="idref" href="#init:41"><span class="id" title="binder">init</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sender:39"><span class="id" title="variable">sender</span></a> <a class="idref" href="ConCert.Embedding.Prelude.html#d92418d8275ab059111c0bf2db0bfc36"><span class="id" title="notation">∉</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:41"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a>) <span class="comment">(*&nbsp;the&nbsp;sender&nbsp;have&nbsp;not&nbsp;donated&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:38"><span class="id" title="variable">BC</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:41"><span class="id" title="variable">init</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;contract&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:38"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:37"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#Donate_coq"><span class="id" title="constructor">Donate_coq</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:42" class="idref" href="#fin:42"><span class="id" title="binder">fin</span></a> <a id="out:43" class="idref" href="#out:43"><span class="id" title="binder">out</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;nothing&nbsp;gets&nbsp;transferred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:43"><span class="id" title="variable">out</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;donation&nbsp;has&nbsp;been&nbsp;accepted&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:42"><span class="id" title="variable">fin</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sender:39"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#donation:40"><span class="id" title="variable">donation</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnew_sender</span> <span class="id" title="var">Hdl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.not_ltb"><span class="id" title="lemma">not_ltb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.inmap_map"><span class="id" title="definition">inmap_map</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map_add"><span class="id" title="lemma">lookup_map_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Existing donations are updated correctly in the contract's state 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.existing_donation_correct" class="idref" href="#CrowdfundingProperties.existing_donation_correct"><span class="id" title="lemma">existing_donation_correct</span></a> <a id="BC:44" class="idref" href="#BC:44"><span class="id" title="binder">BC</span></a> <a id="CallCtx:45" class="idref" href="#CallCtx:45"><span class="id" title="binder">CallCtx</span></a> (<a id="sender:46" class="idref" href="#sender:46"><span class="id" title="binder">sender</span></a> := <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:45"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Ctx_from"><span class="id" title="projection">Ctx_from</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="new_don:47" class="idref" href="#new_don:47"><span class="id" title="binder">new_don</span></a> := <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:45"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Ctx_amount"><span class="id" title="projection">Ctx_amount</span></a>)) <a id="old_don:48" class="idref" href="#old_don:48"><span class="id" title="binder">old_don</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="init:49" class="idref" href="#init:49"><span class="id" title="binder">init</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;sender&nbsp;has&nbsp;already&nbsp;donated&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:49"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sender:46"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#old_don:48"><span class="id" title="variable">old_don</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:44"><span class="id" title="variable">BC</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:49"><span class="id" title="variable">init</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:44"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:45"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#Donate_coq"><span class="id" title="constructor">Donate_coq</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:50" class="idref" href="#fin:50"><span class="id" title="binder">fin</span></a> <a id="out:51" class="idref" href="#out:51"><span class="id" title="binder">out</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;nothing&nbsp;gets&nbsp;transferred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:51"><span class="id" title="variable">out</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;donation&nbsp;has&nbsp;been&nbsp;added&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:50"><span class="id" title="variable">fin</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sender:46"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#old_don:48"><span class="id" title="variable">old_don</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#new_don:47"><span class="id" title="variable">new_don</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">sender</span> <span class="id" title="var">new_don</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsender</span> <span class="id" title="var">Hdl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.not_ltb"><span class="id" title="lemma">not_ltb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsender</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map_add"><span class="id" title="lemma">lookup_map_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="CrowdfundingProperties.sum_map" class="idref" href="#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> (<a id="m:52" class="idref" href="#m:52"><span class="id" title="binder">m</span></a> : <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.addr_map_coq"><span class="id" title="inductive">addr_map_coq</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:52"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.mnil"><span class="id" title="constructor">mnil</span></a> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.mcons"><span class="id" title="constructor">mcons</span></a> <span class="id" title="var">_</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#v"><span class="id" title="definition">v</span></a> <span class="id" title="var">m'</span> =&gt; <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#sum_map:53"><span class="id" title="definition">sum_map</span></a> <span class="id" title="var">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.all_non_neg_sum_map" class="idref" href="#CrowdfundingProperties.all_non_neg_sum_map"><span class="id" title="lemma">all_non_neg_sum_map</span></a> <a id="m:55" class="idref" href="#m:55"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:55"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> 0)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHm</span> <span class="id" title="var">H0</span>). <span class="id" title="var">propify</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.sum_map_add_in" class="idref" href="#CrowdfundingProperties.sum_map_add_in"><span class="id" title="lemma">sum_map_add_in</span></a> <a id="m:56" class="idref" href="#m:56"><span class="id" title="binder">m</span></a> : <span class="id" title="keyword">forall</span> <a id="n0:57" class="idref" href="#n0:57"><span class="id" title="binder">n0</span></a> (<a id="v':58" class="idref" href="#v':58"><span class="id" title="binder">v'</span></a> <a id="v:59" class="idref" href="#v:59"><span class="id" title="binder">v</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <a id="k:60" class="idref" href="#k:60"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:56"><span class="id" title="variable">m</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n0:57"><span class="id" title="variable">n0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:56"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:59"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:60"><span class="id" title="variable">k</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n0:57"><span class="id" title="variable">n0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':58"><span class="id" title="variable">v'</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:56"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':58"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:59"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n0</span>. <span class="id" title="var">revert</span> <span class="id" title="var">v'</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.sum_map_add_not_in" class="idref" href="#CrowdfundingProperties.sum_map_add_not_in"><span class="id" title="lemma">sum_map_add_not_in</span></a> <a id="m:61" class="idref" href="#m:61"><span class="id" title="binder">m</span></a> : <span class="id" title="keyword">forall</span> <a id="v':62" class="idref" href="#v':62"><span class="id" title="binder">v'</span></a> <a id="v:63" class="idref" href="#v:63"><span class="id" title="binder">v</span></a> <a id="k:64" class="idref" href="#k:64"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:61"><span class="id" title="variable">m</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:64"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:61"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:63"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:64"><span class="id" title="variable">k</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':62"><span class="id" title="variable">v'</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:61"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':62"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:63"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">k</span>. <span class="id" title="var">revert</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.sum_map_sub_in" class="idref" href="#CrowdfundingProperties.sum_map_sub_in"><span class="id" title="lemma">sum_map_sub_in</span></a> <a id="m:65" class="idref" href="#m:65"><span class="id" title="binder">m</span></a> <a id="k:66" class="idref" href="#k:66"><span class="id" title="binder">k</span></a> <a id="z:67" class="idref" href="#z:67"><span class="id" title="binder">z</span></a> <a id="v:68" class="idref" href="#v:68"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:65"><span class="id" title="variable">m</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:66"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#z:67"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:65"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:68"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:66"><span class="id" title="variable">k</span></a> 0 <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:65"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v:68"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#z:67"><span class="id" title="variable">z</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">k</span>. <span class="id" title="var">revert</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">IHm</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The contract does no leak funds: the overall balance before the
      deadline is always equal to the sum of individual donations 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.consistent_balance_deadline" class="idref" href="#CrowdfundingProperties.consistent_balance_deadline"><span class="id" title="definition">consistent_balance_deadline</span></a> <a id="current_slot:69" class="idref" href="#current_slot:69"><span class="id" title="binder">current_slot</span></a> <a id="state:70" class="idref" href="#state:70"><span class="id" title="binder">state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#current_slot:69"><span class="id" title="variable">current_slot</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#state:70"><span class="id" title="variable">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#state:70"><span class="id" title="variable">state</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#balance_coq"><span class="id" title="projection">balance_coq</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#state:70"><span class="id" title="variable">state</span></a>.<br/>

<br/>
</div>

<div class="doc">
This lemma holds for any message 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.contract_backed" class="idref" href="#CrowdfundingProperties.contract_backed"><span class="id" title="lemma">contract_backed</span></a> <a id="BC:71" class="idref" href="#BC:71"><span class="id" title="binder">BC</span></a> <a id="CallCtx:72" class="idref" href="#CallCtx:72"><span class="id" title="binder">CallCtx</span></a> <a id="msg:73" class="idref" href="#msg:73"><span class="id" title="binder">msg</span></a> :<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance_deadline"><span class="id" title="definition">consistent_balance_deadline</span></a> (<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:71"><span class="id" title="variable">BC</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:71"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:72"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#msg:73"><span class="id" title="variable">msg</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:74" class="idref" href="#fin:74"><span class="id" title="binder">fin</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance_deadline"><span class="id" title="definition">consistent_balance_deadline</span></a> (<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:71"><span class="id" title="variable">BC</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:74"><span class="id" title="variable">fin</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;H&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hdl</span></span> <span class="inlinecode"><span class="id" title="var">Hsum</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Donate&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;specialize&nbsp;Hdl&nbsp;as&nbsp;Hdl'.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance_deadline"><span class="id" title="definition">consistent_balance_deadline</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance_deadline"><span class="id" title="definition">consistent_balance_deadline</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;not_ltb&nbsp;in&nbsp;Hdl.&nbsp;simpl.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map_add_in"><span class="id" title="lemma">sum_map_add_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map_add_not_in"><span class="id" title="lemma">sum_map_add_not_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;GetFunds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance_deadline"><span class="id" title="definition">consistent_balance_deadline</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#deadline_coq"><span class="id" title="projection">deadline_coq</span></a> <span class="id" title="var">init</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a> <span class="id" title="var">BC</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;get&nbsp;funds&nbsp;before&nbsp;the&nbsp;deadline,&nbsp;so&nbsp;the&nbsp;state&nbsp;is&nbsp;not&nbsp;modified&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[(<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span> )] ] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>); <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#andb_false_r"><span class="id" title="lemma">Bool.andb_false_r</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Claim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance_deadline"><span class="id" title="definition">consistent_balance_deadline</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#deadline_coq"><span class="id" title="projection">deadline_coq</span></a> <span class="id" title="var">init</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a> <span class="id" title="var">BC</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;get&nbsp;funds&nbsp;before&nbsp;the&nbsp;deadline,&nbsp;so&nbsp;the&nbsp;state&nbsp;is&nbsp;not&nbsp;modified&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[(<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span> )] ] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#andb_false_l"><span class="id" title="lemma">Bool.andb_false_l</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.consistent_balance" class="idref" href="#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a> <a id="state:75" class="idref" href="#state:75"><span class="id" title="binder">state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#state:75"><span class="id" title="variable">state</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map"><span class="id" title="definition">sum_map</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#state:75"><span class="id" title="variable">state</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#balance_coq"><span class="id" title="projection">balance_coq</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#state:75"><span class="id" title="variable">state</span></a>.<br/>

<br/>
</div>

<div class="doc">
This lemma holds for any message 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.contract_state_consistent" class="idref" href="#CrowdfundingProperties.contract_state_consistent"><span class="id" title="lemma">contract_state_consistent</span></a> <a id="BC:76" class="idref" href="#BC:76"><span class="id" title="binder">BC</span></a> <a id="CallCtx:77" class="idref" href="#CallCtx:77"><span class="id" title="binder">CallCtx</span></a> <a id="msg:78" class="idref" href="#msg:78"><span class="id" title="binder">msg</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:76"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:77"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#msg:78"><span class="id" title="variable">msg</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:79" class="idref" href="#fin:79"><span class="id" title="binder">fin</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:79"><span class="id" title="variable">fin</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;H&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hdl</span></span> <span class="inlinecode"><span class="id" title="var">Hsum</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Donate&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;specialize&nbsp;Hdl&nbsp;as&nbsp;Hdl'.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;not_ltb&nbsp;in&nbsp;Hdl.&nbsp;simpl.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map_add_in"><span class="id" title="lemma">sum_map_add_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map_add_not_in"><span class="id" title="lemma">sum_map_add_not_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;GetFunds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[(<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span> )] ] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>); <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Claim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdone</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#andb_false_r"><span class="id" title="lemma">Bool.andb_false_r</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[(<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span> )] ] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.sum_map_sub_in"><span class="id" title="lemma">sum_map_sub_in</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="CrowdfundingProperties.donations_non_neg" class="idref" href="#CrowdfundingProperties.donations_non_neg"><span class="id" title="definition">donations_non_neg</span></a> <a id="init:80" class="idref" href="#init:80"><span class="id" title="binder">init</span></a> := <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0%<span class="id" title="var">Z</span>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:80"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.non_neg_add_in" class="idref" href="#CrowdfundingProperties.non_neg_add_in"><span class="id" title="lemma">non_neg_add_in</span></a> <a id="m:81" class="idref" href="#m:81"><span class="id" title="binder">m</span></a> : <span class="id" title="keyword">forall</span> <a id="n0:82" class="idref" href="#n0:82"><span class="id" title="binder">n0</span></a> (<a id="v':83" class="idref" href="#v':83"><span class="id" title="binder">v'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <a id="k:84" class="idref" href="#k:84"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':83"><span class="id" title="variable">v'</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:81"><span class="id" title="variable">m</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:84"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n0:82"><span class="id" title="variable">n0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0%<span class="id" title="var">Z</span>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:81"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0%<span class="id" title="var">Z</span>) (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:84"><span class="id" title="variable">k</span></a> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#n0:82"><span class="id" title="variable">n0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':83"><span class="id" title="variable">v'</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:81"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n0</span>. <span class="id" title="var">revert</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span> <span class="id" title="var">n0</span> <span class="id" title="var">Hlook</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_andb</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">Nat.eqb_eq</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="var">split_andb</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propify</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_andb</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">propify</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.non_neg_add_not_in" class="idref" href="#CrowdfundingProperties.non_neg_add_not_in"><span class="id" title="lemma">non_neg_add_not_in</span></a> <a id="m:85" class="idref" href="#m:85"><span class="id" title="binder">m</span></a> : <span class="id" title="keyword">forall</span> (<a id="v':86" class="idref" href="#v':86"><span class="id" title="binder">v'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) <a id="k:87" class="idref" href="#k:87"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':86"><span class="id" title="variable">v'</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:85"><span class="id" title="variable">m</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:87"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0%<span class="id" title="var">Z</span>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:85"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0%<span class="id" title="var">Z</span>) (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:87"><span class="id" title="variable">k</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#v':86"><span class="id" title="variable">v'</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:85"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">Hnneg</span> <span class="id" title="var">Hlook</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">split_andb</span>; <span class="id" title="var">now</span> <span class="id" title="var">propify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">Nat.eqb_eq</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="var">split_andb</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">propify</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">propify</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.non_neg_add_0" class="idref" href="#CrowdfundingProperties.non_neg_add_0"><span class="id" title="lemma">non_neg_add_0</span></a> <a id="m:88" class="idref" href="#m:88"><span class="id" title="binder">m</span></a> <a id="k:89" class="idref" href="#k:89"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0%<span class="id" title="var">Z</span>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:88"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb"><span class="id" title="definition">map_forallb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb"><span class="id" title="definition">Z.leb</span></a> 0%<span class="id" title="var">Z</span>) (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#k:89"><span class="id" title="variable">k</span></a> 0 <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#m:88"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">propify</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All the entries in the table of contributions contain non-negative amounts 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.contract_state_donation_non_neg" class="idref" href="#CrowdfundingProperties.contract_state_donation_non_neg"><span class="id" title="lemma">contract_state_donation_non_neg</span></a> <a id="BC:90" class="idref" href="#BC:90"><span class="id" title="binder">BC</span></a> <a id="CallCtx:91" class="idref" href="#CallCtx:91"><span class="id" title="binder">CallCtx</span></a> <a id="msg:92" class="idref" href="#msg:92"><span class="id" title="binder">msg</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:91"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Ctx_amount"><span class="id" title="projection">Ctx_amount</span></a>))%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.donations_non_neg"><span class="id" title="definition">donations_non_neg</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:90"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:91"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#msg:92"><span class="id" title="variable">msg</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:93" class="idref" href="#fin:93"><span class="id" title="binder">fin</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.donations_non_neg"><span class="id" title="definition">donations_non_neg</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:93"><span class="id" title="variable">fin</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hamount</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Donate&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;specialize&nbsp;Hdl&nbsp;as&nbsp;Hdl'.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.consistent_balance"><span class="id" title="definition">consistent_balance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;not_ltb&nbsp;in&nbsp;Hdl.&nbsp;simpl.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">z</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Embedding.Prelude.html#Maps.map_forallb_lookup_map"><span class="id" title="lemma">map_forallb_lookup_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.donations_non_neg"><span class="id" title="definition">donations_non_neg</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.non_neg_add_in"><span class="id" title="lemma">non_neg_add_in</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.donations_non_neg"><span class="id" title="definition">donations_non_neg</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.non_neg_add_not_in"><span class="id" title="lemma">non_neg_add_not_in</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;GetFunds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.donations_non_neg"><span class="id" title="definition">donations_non_neg</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[(<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span> )] ] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>); <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Claim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.donations_non_neg"><span class="id" title="definition">donations_non_neg</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[(<span class="id" title="keyword">if</span> ?<span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span> )] ] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Embedding.Prelude.html#Maps.lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.non_neg_add_0"><span class="id" title="lemma">non_neg_add_0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The owner gets the money after the deadline, if the goal is reached 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.GetFunds_correct" class="idref" href="#CrowdfundingProperties.GetFunds_correct"><span class="id" title="lemma">GetFunds_correct</span></a> <a id="BC:94" class="idref" href="#BC:94"><span class="id" title="binder">BC</span></a> <a id="CallCtx:95" class="idref" href="#CallCtx:95"><span class="id" title="binder">CallCtx</span></a> (<a id="OwnerAddr:96" class="idref" href="#OwnerAddr:96"><span class="id" title="binder">OwnerAddr</span></a> := <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:95"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Ctx_from"><span class="id" title="projection">Ctx_from</span></a>)) (<a id="funds:97" class="idref" href="#funds:97"><span class="id" title="binder">funds</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="init:98" class="idref" href="#init:98"><span class="id" title="binder">init</span></a> =&gt; <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.funded"><span class="id" title="definition">funded</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:94"><span class="id" title="variable">BC</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:98"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:98"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#owner_coq"><span class="id" title="projection">owner_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#OwnerAddr:96"><span class="id" title="variable">OwnerAddr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#balance_coq"><span class="id" title="projection">balance_coq</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:98"><span class="id" title="variable">init</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#funds:97"><span class="id" title="variable">funds</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:94"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:95"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#GetFunds_coq"><span class="id" title="constructor">GetFunds_coq</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:99" class="idref" href="#fin:99"><span class="id" title="binder">fin</span></a> <a id="out:100" class="idref" href="#out:100"><span class="id" title="binder">out</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;money&nbsp;are&nbsp;sent&nbsp;back&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Act_transfer"><span class="id" title="constructor">Act_transfer</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#OwnerAddr:96"><span class="id" title="variable">OwnerAddr</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#funds:97"><span class="id" title="variable">funds</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:100"><span class="id" title="variable">out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;set&nbsp;balance&nbsp;to&nbsp;0&nbsp;after&nbsp;withdrawing&nbsp;by&nbsp;the&nbsp;owner&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:99"><span class="id" title="variable">fin</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#balance_coq"><span class="id" title="projection">balance_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;set&nbsp;the&nbsp;"done"&nbsp;flag&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:99"><span class="id" title="variable">fin</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hfunded</span> [<span class="id" title="var">Hown</span> <span class="id" title="var">Hbalance</span>]]. <span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.funded"><span class="id" title="definition">funded</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.goal_reached"><span class="id" title="definition">goal_reached</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span> <span class="id" title="var">OwnerAddr</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">destruct</span> ( <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">Z</span>; <span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Backers cannot claim their money if the campaign have succeed (but owner haven't claimed the money yet, so the "done" flag is not set to <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a></span>) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.no_claim_if_succeeded" class="idref" href="#CrowdfundingProperties.no_claim_if_succeeded"><span class="id" title="lemma">no_claim_if_succeeded</span></a> <a id="BC:101" class="idref" href="#BC:101"><span class="id" title="binder">BC</span></a> <a id="CallCtx:102" class="idref" href="#CallCtx:102"><span class="id" title="binder">CallCtx</span></a> <a id="the_state:103" class="idref" href="#the_state:103"><span class="id" title="binder">the_state</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="init:104" class="idref" href="#init:104"><span class="id" title="binder">init</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.funded"><span class="id" title="definition">funded</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:101"><span class="id" title="variable">BC</span></a>.(<a class="idref" href="ConCert.Embedding.SimpleBlockchain.html#AcornBlockchain.Current_slot"><span class="id" title="projection">Current_slot</span></a>) <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:104"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:104"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:104"><span class="id" title="variable">init</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#the_state:103"><span class="id" title="variable">the_state</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:101"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:102"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#Claim_coq"><span class="id" title="constructor">Claim_coq</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Nothing&nbsp;happens&nbsp;-&nbsp;the&nbsp;stated&nbsp;stays&nbsp;the&nbsp;same&nbsp;and&nbsp;no&nbsp;outgoing&nbsp;transfers&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:105" class="idref" href="#fin:105"><span class="id" title="binder">fin</span></a> <a id="out:106" class="idref" href="#out:106"><span class="id" title="binder">out</span></a> =&gt; <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:105"><span class="id" title="variable">fin</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#the_state:103"><span class="id" title="variable">the_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:106"><span class="id" title="variable">out</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.funded"><span class="id" title="definition">funded</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.goal_reached"><span class="id" title="definition">goal_reached</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdl</span> [<span class="id" title="var">Hgoal</span> <span class="id" title="var">Hst</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_andb</span> <span class="id" title="var">Hdl</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">the_state</span>. <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">the_state</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i_balance</span> <span class="id" title="var">i_dons</span> <span class="id" title="var">i_own</span> <span class="id" title="var">i_dl</span> <span class="id" title="var">i_done</span> <span class="id" title="var">i_goal</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">CallCtx</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">i_balance</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#f1746f02f141d025b1e53605943919bf"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">i_goal</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.ltb_ge"><span class="id" title="lemma">Z.ltb_ge</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#Z.leb_le"><span class="id" title="lemma">Z.leb_le</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Backers cannot claim their money if the contract is marked as "done" 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="CrowdfundingProperties.no_claim_after_done" class="idref" href="#CrowdfundingProperties.no_claim_after_done"><span class="id" title="lemma">no_claim_after_done</span></a> <a id="BC:107" class="idref" href="#BC:107"><span class="id" title="binder">BC</span></a> <a id="CallCtx:108" class="idref" href="#CallCtx:108"><span class="id" title="binder">CallCtx</span></a> <a id="the_state:109" class="idref" href="#the_state:109"><span class="id" title="binder">the_state</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="init:110" class="idref" href="#init:110"><span class="id" title="binder">init</span></a> =&gt; <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:110"><span class="id" title="variable">init</span></a>.(<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#init:110"><span class="id" title="variable">init</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#the_state:109"><span class="id" title="variable">the_state</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.Crowdfunding.html#CrowdfundingContract.Receive.receive"><span class="id" title="definition">Receive.receive</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#BC:107"><span class="id" title="variable">BC</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CallCtx:108"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#Claim_coq"><span class="id" title="constructor">Claim_coq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Nothing&nbsp;happens&nbsp;-&nbsp;the&nbsp;stated&nbsp;stays&nbsp;the&nbsp;same&nbsp;and&nbsp;no&nbsp;outgoing&nbsp;transfers&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">{{</span></a> <span class="id" title="keyword">fun</span> <a id="fin:111" class="idref" href="#fin:111"><span class="id" title="binder">fin</span></a> <a id="out:112" class="idref" href="#out:112"><span class="id" title="binder">out</span></a> =&gt; <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#fin:111"><span class="id" title="variable">fin</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#the_state:109"><span class="id" title="variable">the_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#out:112"><span class="id" title="variable">out</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#1b3c9204bd2687e4af324543ba919951"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.assertion"><span class="id" title="definition">assertion</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">init</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.funded"><span class="id" title="definition">funded</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.deadline_passed"><span class="id" title="definition">deadline_passed</span></a>,<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.goal_reached"><span class="id" title="definition">goal_reached</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">the_state</span>. <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties.run"><span class="id" title="definition">run</span></a>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingData.html#done_coq"><span class="id" title="projection">done_coq</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Bool.Bool.html#andb_false_r"><span class="id" title="lemma">Bool.andb_false_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Examples.Crowdfunding.CrowdfundingCorrect.html#CrowdfundingProperties"><span class="id" title="module">CrowdfundingProperties</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="https://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a> and <a href="https://github.com/jgallen23/toc">TOC</a>
</div>
</div>
<script>
  const elements = document.getElementsByClassName("libtitle");
  while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
  }
  if (window.location.pathname.endsWith("/toc.html")) {
      const jstocDiv = document.getElementById("js-toc");
      jstocDiv.classList.remove("toc");
      jstocDiv.classList.add("jstoc-hidden");
      const jstocHeaderDiv = document.getElementById("js-toc-header");
      jstocHeaderDiv.classList.add("jstoc-hidden");
      const mainDiv = document.getElementById("main");
      mainDiv.classList.add("jstoc-hidden-main");
      const toggleDiv = document.getElementById("toggle-toc");
      toggleDiv.classList.add("jstoc-hidden");
  }
  console.log(window.location.pathname);
</script>
<script type="text/javascript" src="toc.js"></script>
</body>

</html>
