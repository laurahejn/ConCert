<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<link href="toc.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
      <span id="toggle-toc">Contents</span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/AU-COBRA/ConCert" target="_balnk">Project Page</a>
      <a href="index.html">Index</a>
      <a href="toc.html">Table of contents</a>
    </span>
</div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="js-toc" class="toc" data-toc="h1,h2,h3,h4" data-toc-container="doc" data-toc-offset="-40">
      <div id="js-toc-header" class="toc-header">Contents:</div>
    </div>
    <div id="main">
<h1 class="libtitle">Library ConCert.Execution.Test.TraceGens</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;The&nbsp;ChainTrace&nbsp;datatype&nbsp;is&nbsp;defined&nbsp;as&nbsp;a&nbsp;ChainedList&nbsp;of&nbsp;ChainStates&nbsp;and&nbsp;ChainSteps.<br/>
&nbsp;&nbsp;This&nbsp;file&nbsp;defines&nbsp;a&nbsp;generator&nbsp;combinator,&nbsp;gChain,&nbsp;for&nbsp;the&nbsp;ChainBuilder&nbsp;type.<br/>
&nbsp;&nbsp;From&nbsp;this,&nbsp;a&nbsp;generator/arbitrary&nbsp;instance&nbsp;for&nbsp;the&nbsp;ChainTrace&nbsp;type&nbsp;is&nbsp;derived&nbsp;automatically.<br/>
<br/>
&nbsp;&nbsp;This&nbsp;file&nbsp;also&nbsp;contains&nbsp;checker&nbsp;combinator&nbsp;over&nbsp;ChainBuilders/ChainTraces,<br/>
&nbsp;&nbsp;like&nbsp;forAllChainTrace,&nbsp;reachableFrom_chaintrace,&nbsp;and&nbsp;pre_post_assertion.<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-extraction-logical-axiom".<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">QuickChick</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">QuickChick</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Utils.Extras.html#"><span class="id" title="library">Extras</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Blockchain.html#"><span class="id" title="library">Blockchain</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Serializable.html#"><span class="id" title="library">Serializable</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.BoundedN.html#"><span class="id" title="library">BoundedN</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.ResultMonad.html#"><span class="id" title="library">ResultMonad</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.ChainedList.html#"><span class="id" title="library">ChainedList</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution.Test</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#"><span class="id" title="library">TestUtils</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#MonadNotation"><span class="id" title="module">MonadNotation</span></a>. <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">monad_scope</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">QcNotation</span>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.BoundedN.html#BoundedN.Stdpp"><span class="id" title="module">BoundedN.Stdpp</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="TraceGens" class="idref" href="#TraceGens"><span class="id" title="section">TraceGens</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:1" class="idref" href="#H:1"><span class="id" title="binder">Show</span></a> <a id="H:1" class="idref" href="#H:1"><span class="id" title="binder">ChainBuilder</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H0:2" class="idref" href="#H0:2"><span class="id" title="binder">Show</span></a> <a id="H0:2" class="idref" href="#H0:2"><span class="id" title="binder">ChainState</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Definition</span> <a id="BlockReward" class="idref" href="#BlockReward"><span class="id" title="definition">BlockReward</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Amount"><span class="id" title="definition">Amount</span></a> := 50.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Definition</span> <a id="BlockCreator" class="idref" href="#BlockCreator"><span class="id" title="definition">BlockCreator</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a> := <a class="idref" href="ConCert.Execution.Test.TestUtils.html#creator"><span class="id" title="definition">creator</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Definition</span> <a id="MaxGenAttempts" class="idref" href="#MaxGenAttempts"><span class="id" title="definition">MaxGenAttempts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> := 2.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Deconstructs&nbsp;a&nbsp;ChainTrace&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;blockheaders&nbsp;list&nbsp;of&nbsp;the&nbsp;minimum&nbsp;information<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;needed&nbsp;to&nbsp;reconstruct&nbsp;a&nbsp;ChainTrace,&nbsp;that&nbsp;being&nbsp;a&nbsp;list&nbsp;of&nbsp;block&nbsp;headers&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain_state_queues&nbsp;from&nbsp;each&nbsp;step_block&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="trace_blocks" class="idref" href="#trace_blocks"><span class="id" title="definition">trace_blocks</span></a> {<a id="from:3" class="idref" href="#from:3"><span class="id" title="binder">from</span></a> <a id="to:4" class="idref" href="#to:4"><span class="id" title="binder">to</span></a>} (<a id="trace:5" class="idref" href="#trace:5"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:3"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:4"><span class="id" title="variable">to</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#BlockHeader"><span class="id" title="record">BlockHeader</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:5"><span class="id" title="variable">trace</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#step_block"><span class="id" title="constructor">Blockchain.step_block</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">header</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="keyword">as</span> <span class="id" title="var">step</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_blocks:6"><span class="id" title="definition">trace_blocks</span></a> <span class="id" title="var">trace'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">header</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#chain_state_queue"><span class="id" title="projection">chain_state_queue</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#chainstep_states"><span class="id" title="definition">chainstep_states</span></a> <span class="id" title="var">step</span>))<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_blocks:6"><span class="id" title="definition">trace_blocks</span></a> <span class="id" title="var">trace'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#clnil"><span class="id" title="constructor">clnil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Reconstructs&nbsp;list&nbsp;of&nbsp;block&nbsp;information&nbsp;(blockheaders&nbsp;and&nbsp;queues)&nbsp;to&nbsp;a&nbsp;ChainBuilder.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;trims&nbsp;any&nbsp;empty&nbsp;blocks&nbsp;that&nbsp;can&nbsp;be&nbsp;removed&nbsp;without&nbsp;invalidating&nbsp;execution&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;remaining&nbsp;actions.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Also&nbsp;removes&nbsp;any&nbsp;actions&nbsp;that&nbsp;cannot&nbsp;be&nbsp;executed&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="build_chain_builder" class="idref" href="#build_chain_builder"><span class="id" title="definition">build_chain_builder</span></a> (<a id="init_cb:8" class="idref" href="#init_cb:8"><span class="id" title="binder">init_cb</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>) <a id="blocks:9" class="idref" href="#blocks:9"><span class="id" title="binder">blocks</span></a> : <a class="idref" href="ConCert.Execution.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#AddBlockError"><span class="id" title="inductive">AddBlockError</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Instead&nbsp;of&nbsp;using&nbsp;the&nbsp;original&nbsp;header&nbsp;we&nbsp;need&nbsp;override&nbsp;height&nbsp;and&nbsp;finalized_height<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;since&nbsp;the&nbsp;blockchain&nbsp;requires&nbsp;that&nbsp;the&nbsp;height&nbsp;always&nbsp;grows&nbsp;by&nbsp;one&nbsp;and&nbsp;if&nbsp;we&nbsp;trim&nbsp;and&nbsp;keep&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;in&nbsp;the&nbsp;original&nbsp;header&nbsp;then&nbsp;the&nbsp;height&nbsp;would&nbsp;increase&nbsp;by&nbsp;two&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="new_header:12" class="idref" href="#new_header:12"><span class="id" title="binder">new_header</span></a> <a id="header:11" class="idref" href="#header:11"><span class="id" title="binder">header</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="ConCert.Execution.Blockchain.html#block_height"><span class="id" title="projection">block_height</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#chain_height"><span class="id" title="projection">chain_height</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:8"><span class="id" title="variable">init_cb</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_slot"><span class="id" title="projection">block_slot</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:11"><span class="id" title="variable">header</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#block_slot"><span class="id" title="projection">block_slot</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_finalized_height"><span class="id" title="projection">block_finalized_height</span></a> := <a class="idref" href="ConCert.Execution.Blockchain.html#finalized_height"><span class="id" title="projection">finalized_height</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:8"><span class="id" title="variable">init_cb</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_creator"><span class="id" title="projection">block_creator</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:11"><span class="id" title="variable">header</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#block_creator"><span class="id" title="projection">block_creator</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_reward"><span class="id" title="projection">block_reward</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:11"><span class="id" title="variable">header</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#block_reward"><span class="id" title="projection">block_reward</span></a>); |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Remove&nbsp;any&nbsp;actions&nbsp;that&nbsp;are&nbsp;no&nbsp;longer&nbsp;valid&nbsp;due&nbsp;to&nbsp;earlier&nbsp;actions<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;could&nbsp;have&nbsp;been&nbsp;removed&nbsp;by&nbsp;the&nbsp;shrinker&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="try_remove_invalid_acts:19" class="idref" href="#try_remove_invalid_acts:19"><span class="id" title="binder">try_remove_invalid_acts</span></a> <a id="header:13" class="idref" href="#header:13"><span class="id" title="binder">header</span></a> <a id="acts:14" class="idref" href="#acts:14"><span class="id" title="binder">acts</span></a> <a id="blocks:15" class="idref" href="#blocks:15"><span class="id" title="binder">blocks</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="valid_acts:18" class="idref" href="#valid_acts:18"><span class="id" title="binder">valid_acts</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <a id="acts:16" class="idref" href="#acts:16"><span class="id" title="binder">acts</span></a> <a id="act:17" class="idref" href="#act:17"><span class="id" title="binder">act</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Blockchain.html#builder_add_block"><span class="id" title="method">builder_add_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:8"><span class="id" title="variable">init_cb</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#new_header:12"><span class="id" title="variable">new_header</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:13"><span class="id" title="variable">header</span></a>) (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:16"><span class="id" title="variable">acts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:17"><span class="id" title="variable">act</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">cb</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:16"><span class="id" title="variable">acts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:17"><span class="id" title="variable">act</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#error"><span class="id" title="definition">error</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:16"><span class="id" title="variable">acts</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:14"><span class="id" title="variable">acts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Blockchain.html#builder_add_block"><span class="id" title="method">builder_add_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:8"><span class="id" title="variable">init_cb</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#new_header:12"><span class="id" title="variable">new_header</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:13"><span class="id" title="variable">header</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#valid_acts:18"><span class="id" title="variable">valid_acts</span></a> <span class="id" title="keyword">with</span> <span class="comment">(*&nbsp;TODO:&nbsp;also&nbsp;try&nbsp;to&nbsp;trim&nbsp;block&nbsp;here&nbsp;if&nbsp;valid_acts&nbsp;is&nbsp;empty&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">cb</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#build_chain_builder:10"><span class="id" title="definition">build_chain_builder</span></a> <span class="id" title="var">cb</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#blocks:15"><span class="id" title="variable">blocks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#error"><span class="id" title="definition">error</span></a> =&gt; <a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <span class="id" title="var">error</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="build_block:23" class="idref" href="#build_block:23"><span class="id" title="binder">build_block</span></a> <a id="header:20" class="idref" href="#header:20"><span class="id" title="binder">header</span></a> <a id="acts:21" class="idref" href="#acts:21"><span class="id" title="binder">acts</span></a> <a id="blocks:22" class="idref" href="#blocks:22"><span class="id" title="binder">blocks</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Blockchain.html#builder_add_block"><span class="id" title="method">builder_add_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:8"><span class="id" title="variable">init_cb</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#new_header:12"><span class="id" title="variable">new_header</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:20"><span class="id" title="variable">header</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:21"><span class="id" title="variable">acts</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">cb</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#build_chain_builder:10"><span class="id" title="definition">build_chain_builder</span></a> <span class="id" title="var">cb</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#blocks:22"><span class="id" title="variable">blocks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#error"><span class="id" title="definition">error</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#try_remove_invalid_acts:19"><span class="id" title="variable">try_remove_invalid_acts</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:20"><span class="id" title="variable">header</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:21"><span class="id" title="variable">acts</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#blocks:22"><span class="id" title="variable">blocks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Attempt&nbsp;to&nbsp;trim&nbsp;block&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="try_trim:28" class="idref" href="#try_trim:28"><span class="id" title="binder">try_trim</span></a> <a id="header:24" class="idref" href="#header:24"><span class="id" title="binder">header</span></a> <a id="blocks:25" class="idref" href="#blocks:25"><span class="id" title="binder">blocks</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trimmed_result:26" class="idref" href="#trimmed_result:26"><span class="id" title="binder">trimmed_result</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#build_chain_builder:10"><span class="id" title="definition">build_chain_builder</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:8"><span class="id" title="variable">init_cb</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#blocks:25"><span class="id" title="variable">blocks</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trimmed_result:26"><span class="id" title="variable">trimmed_result</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">cb</span> =&gt; <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">cb</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#error"><span class="id" title="definition">error</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#build_block:23"><span class="id" title="variable">build_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:24"><span class="id" title="variable">header</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#blocks:25"><span class="id" title="variable">blocks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#blocks:9"><span class="id" title="variable">blocks</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:8"><span class="id" title="variable">init_cb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">header</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#try_trim:28"><span class="id" title="variable">try_trim</span></a> <span class="id" title="var">header</span> <span class="id" title="var">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">header</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">acts</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#build_block:23"><span class="id" title="variable">build_block</span></a> <span class="id" title="var">header</span> <span class="id" title="var">acts</span> <span class="id" title="var">xs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Reconstructs&nbsp;a&nbsp;list&nbsp;of&nbsp;ChainBuilders&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="rebuild_chains" class="idref" href="#rebuild_chains"><span class="id" title="definition">rebuild_chains</span></a> (<a id="shrunk_chains:30" class="idref" href="#shrunk_chains:30"><span class="id" title="binder">shrunk_chains</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#BlockHeader"><span class="id" title="record">BlockHeader</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>))) <a id="init_cb:31" class="idref" href="#init_cb:31"><span class="id" title="binder">init_cb</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#shrunk_chains:30"><span class="id" title="variable">shrunk_chains</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">block</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">blocks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#build_chain_builder"><span class="id" title="definition">build_chain_builder</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:31"><span class="id" title="variable">init_cb</span></a> <span class="id" title="var">block</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">cb</span> =&gt; <span class="id" title="var">cb</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#rebuild_chains:32"><span class="id" title="definition">rebuild_chains</span></a> <span class="id" title="var">blocks</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:31"><span class="id" title="variable">init_cb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#error"><span class="id" title="definition">error</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#rebuild_chains:32"><span class="id" title="definition">rebuild_chains</span></a> <span class="id" title="var">blocks</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:31"><span class="id" title="variable">init_cb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Alternative&nbsp;version&nbsp;of&nbsp;ordinary&nbsp;list&nbsp;shrinker&nbsp;that&nbsp;does&nbsp;not&nbsp;attempt&nbsp;to&nbsp;shrink&nbsp;list&nbsp;elements&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="shrinkListAux_" class="idref" href="#shrinkListAux_"><span class="id" title="definition">shrinkListAux_</span></a> {<a id="A:34" class="idref" href="#A:34"><span class="id" title="binder">A</span></a>} (<a id="l:35" class="idref" href="#l:35"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#A:34"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#A:34"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#l:35"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> =&gt; <span class="id" title="var">xs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="xs':38" class="idref" href="#xs':38"><span class="id" title="binder">xs'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#A:34"><span class="id" title="variable">A</span></a> =&gt; <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#xs':38"><span class="id" title="variable">xs'</span></a>) (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#shrinkListAux_:36"><span class="id" title="definition">shrinkListAux_</span></a> <span class="id" title="var">xs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Shrink&nbsp;list&nbsp;of&nbsp;blocks&nbsp;by&nbsp;trying&nbsp;all&nbsp;combinations&nbsp;of&nbsp;removing&nbsp;one&nbsp;action&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="shrinkChainBuilderAux" class="idref" href="#shrinkChainBuilderAux"><span class="id" title="definition">shrinkChainBuilderAux</span></a> (<a id="blocks:39" class="idref" href="#blocks:39"><span class="id" title="binder">blocks</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#BlockHeader"><span class="id" title="record">BlockHeader</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#BlockHeader"><span class="id" title="record">BlockHeader</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#blocks:39"><span class="id" title="variable">blocks</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">block</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">blocks'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">header</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">acts</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <span class="id" title="var">block</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="acts_shrunk:43" class="idref" href="#acts_shrunk:43"><span class="id" title="binder">acts_shrunk</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#shrinkListAux_"><span class="id" title="definition">shrinkListAux_</span></a> <span class="id" title="var">acts</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="block_shrunk:45" class="idref" href="#block_shrunk:45"><span class="id" title="binder">block_shrunk</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="acts:44" class="idref" href="#acts:44"><span class="id" title="binder">acts</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">header</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:44"><span class="id" title="variable">acts</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts_shrunk:43"><span class="id" title="variable">acts_shrunk</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="block':46" class="idref" href="#block':46"><span class="id" title="binder">block'</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#block':46"><span class="id" title="variable">block'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">blocks'</span>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#block_shrunk:45"><span class="id" title="variable">block_shrunk</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="xs:47" class="idref" href="#xs:47"><span class="id" title="binder">xs</span></a> =&gt; <span class="id" title="var">block</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#xs:47"><span class="id" title="variable">xs</span></a>) (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#shrinkChainBuilderAux:40"><span class="id" title="definition">shrinkChainBuilderAux</span></a> <span class="id" title="var">blocks'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Shrinker&nbsp;for&nbsp;ChainBuilders,&nbsp;it&nbsp;will&nbsp;only&nbsp;try&nbsp;to&nbsp;shrink&nbsp;the&nbsp;blocks&nbsp;and&nbsp;their&nbsp;action&nbsp;queues,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;will&nbsp;not&nbsp;attempt&nbsp;to&nbsp;shrink&nbsp;parameters&nbsp;of&nbsp;any&nbsp;actions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="shrinkChainBuilder" class="idref" href="#shrinkChainBuilder"><span class="id" title="instance">shrinkChainBuilder</span></a> : <span class="id" title="class">Shrink</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">shrink</span> <a id="cb:48" class="idref" href="#cb:48"><span class="id" title="binder">cb</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cb_blocks:49" class="idref" href="#cb_blocks:49"><span class="id" title="binder">cb_blocks</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_blocks"><span class="id" title="definition">trace_blocks</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:48"><span class="id" title="variable">cb</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="shrunk_blocks:50" class="idref" href="#shrunk_blocks:50"><span class="id" title="binder">shrunk_blocks</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#shrinkChainBuilderAux"><span class="id" title="definition">shrinkChainBuilderAux</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb_blocks:49"><span class="id" title="variable">cb_blocks</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#rebuild_chains"><span class="id" title="definition">rebuild_chains</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#shrunk_blocks:50"><span class="id" title="variable">shrunk_blocks</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#builder_initial"><span class="id" title="method">builder_initial</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Adds&nbsp;a&nbsp;block&nbsp;with&nbsp;miner&nbsp;reward&nbsp;of&nbsp;50.&nbsp;This&nbsp;is&nbsp;used&nbsp;for&nbsp;all&nbsp;testing&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="add_block" class="idref" href="#add_block"><span class="id" title="definition">add_block</span></a> (<a id="chain:51" class="idref" href="#chain:51"><span class="id" title="binder">chain</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>) <a id="acts:52" class="idref" href="#acts:52"><span class="id" title="binder">acts</span></a> : <a class="idref" href="ConCert.Execution.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#AddBlockError"><span class="id" title="inductive">AddBlockError</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="header:53" class="idref" href="#header:53"><span class="id" title="binder">header</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="ConCert.Execution.Blockchain.html#block_height"><span class="id" title="projection">block_height</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#chain_height"><span class="id" title="projection">chain_height</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#chain:51"><span class="id" title="variable">chain</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_slot"><span class="id" title="projection">block_slot</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#current_slot"><span class="id" title="projection">current_slot</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#chain:51"><span class="id" title="variable">chain</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_finalized_height"><span class="id" title="projection">block_finalized_height</span></a> := <a class="idref" href="ConCert.Execution.Blockchain.html#finalized_height"><span class="id" title="projection">finalized_height</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#chain:51"><span class="id" title="variable">chain</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_creator"><span class="id" title="projection">block_creator</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#BlockCreator"><span class="id" title="definition">BlockCreator</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#block_reward"><span class="id" title="projection">block_reward</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#BlockReward"><span class="id" title="definition">BlockReward</span></a>; |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#builder_add_block"><span class="id" title="method">builder_add_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#chain:51"><span class="id" title="variable">chain</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#header:53"><span class="id" title="variable">header</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:52"><span class="id" title="variable">acts</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gAdd_block" class="idref" href="#gAdd_block"><span class="id" title="definition">gAdd_block</span></a> (<a id="cb:54" class="idref" href="#cb:54"><span class="id" title="binder">cb</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gActOptFromChainSized:55" class="idref" href="#gActOptFromChainSized:55"><span class="id" title="binder">gActOptFromChainSized</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">GOpt</span> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="act_depth:56" class="idref" href="#act_depth:56"><span class="id" title="binder">act_depth</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="max_acts_per_block:57" class="idref" href="#max_acts_per_block:57"><span class="id" title="binder">max_acts_per_block</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#AddBlockError"><span class="id" title="inductive">AddBlockError</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="acts:58" class="idref" href="#acts:58"><span class="id" title="binder">acts</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#optToVector"><span class="id" title="definition">optToVector</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#max_acts_per_block:57"><span class="id" title="variable">max_acts_per_block</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gActOptFromChainSized:55"><span class="id" title="variable">gActOptFromChainSized</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:54"><span class="id" title="variable">cb</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act_depth:56"><span class="id" title="variable">act_depth</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">returnGen</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#add_block"><span class="id" title="definition">add_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:54"><span class="id" title="variable">cb</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:58"><span class="id" title="variable">acts</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Given&nbsp;a&nbsp;function&nbsp;from&nbsp;nat&nbsp;to&nbsp;a&nbsp;generator,&nbsp;try&nbsp;the&nbsp;generator&nbsp;on&nbsp;decreasing&nbsp;number&nbsp;until&nbsp;one&nbsp;returns&nbsp;Ok&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="try_decreasing" class="idref" href="#try_decreasing"><span class="id" title="definition">try_decreasing</span></a> {<a id="T:59" class="idref" href="#T:59"><span class="id" title="binder">T</span></a> <a id="E:60" class="idref" href="#E:60"><span class="id" title="binder">E</span></a>} (<a id="default:61" class="idref" href="#default:61"><span class="id" title="binder">default</span></a> : <a class="idref" href="ConCert.Execution.Test.TraceGens.html#E:60"><span class="id" title="variable">E</span></a>) (<a id="n:62" class="idref" href="#n:62"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:63" class="idref" href="#g:63"><span class="id" title="binder">g</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#T:59"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#E:60"><span class="id" title="variable">E</span></a>)) : <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#T:59"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#E:60"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:62"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" title="axiom">returnGen</span> (<a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#default:61"><span class="id" title="variable">default</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ma:66" class="idref" href="#ma:66"><span class="id" title="binder">ma</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#g:63"><span class="id" title="variable">g</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:62"><span class="id" title="variable">n</span></a><a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#ma:66"><span class="id" title="variable">ma</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#try_decreasing:64"><span class="id" title="definition">try_decreasing</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#default:61"><span class="id" title="variable">default</span></a> <span class="id" title="var">n'</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#g:63"><span class="id" title="variable">g</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">r</span> =&gt; <span class="id" title="axiom">returnGen</span> (<a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="try_repeated" class="idref" href="#try_repeated"><span class="id" title="definition">try_repeated</span></a> {<a id="T:68" class="idref" href="#T:68"><span class="id" title="binder">T</span></a> <a id="E:69" class="idref" href="#E:69"><span class="id" title="binder">E</span></a>} (<a id="default:70" class="idref" href="#default:70"><span class="id" title="binder">default</span></a> : <a class="idref" href="ConCert.Execution.Test.TraceGens.html#E:69"><span class="id" title="variable">E</span></a>) (<a id="n:71" class="idref" href="#n:71"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="g:72" class="idref" href="#g:72"><span class="id" title="binder">g</span></a> : <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#T:68"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#E:69"><span class="id" title="variable">E</span></a>)) : <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#T:68"><span class="id" title="variable">T</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#E:69"><span class="id" title="variable">E</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#backtrack_result"><span class="id" title="definition">backtrack_result</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#default:70"><span class="id" title="variable">default</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#g:72"><span class="id" title="variable">g</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:71"><span class="id" title="variable">n</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gChain" class="idref" href="#gChain"><span class="id" title="definition">gChain</span></a> (<a id="init_lc:73" class="idref" href="#init_lc:73"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gActOptFromChainSized:74" class="idref" href="#gActOptFromChainSized:74"><span class="id" title="binder">gActOptFromChainSized</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">GOpt</span> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="max_length:75" class="idref" href="#max_length:75"><span class="id" title="binder">max_length</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="act_depth:76" class="idref" href="#act_depth:76"><span class="id" title="binder">act_depth</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="max_acts_per_block:77" class="idref" href="#max_acts_per_block:77"><span class="id" title="binder">max_acts_per_block</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="gAdd_block':80" class="idref" href="#gAdd_block':80"><span class="id" title="binder">gAdd_block'</span></a> <a id="lc:78" class="idref" href="#lc:78"><span class="id" title="binder">lc</span></a> <a id="max_acts:79" class="idref" href="#max_acts:79"><span class="id" title="binder">max_acts</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#gAdd_block"><span class="id" title="definition">gAdd_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:78"><span class="id" title="variable">lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#gActOptFromChainSized:74"><span class="id" title="variable">gActOptFromChainSized</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act_depth:76"><span class="id" title="variable">act_depth</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#max_acts:79"><span class="id" title="variable">max_acts</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="default_error:81" class="idref" href="#default_error:81"><span class="id" title="binder">default_error</span></a> := <a class="idref" href="ConCert.Execution.Blockchain.html#action_evaluation_depth_exceeded"><span class="id" title="constructor">action_evaluation_depth_exceeded</span></a> <span class="id" title="tactic">in</span> <span class="comment">(*&nbsp;TODO:&nbsp;Not&nbsp;ideal&nbsp;approach,&nbsp;but&nbsp;it&nbsp;suffices&nbsp;for&nbsp;now&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="try_repeat:83" class="idref" href="#try_repeat:83"><span class="id" title="binder">try_repeat</span></a> <a id="g:82" class="idref" href="#g:82"><span class="id" title="binder">g</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#try_repeated"><span class="id" title="definition">try_repeated</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#default_error:81"><span class="id" title="variable">default_error</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#MaxGenAttempts"><span class="id" title="definition">MaxGenAttempts</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#g:82"><span class="id" title="variable">g</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="try_decreasing:86" class="idref" href="#try_decreasing:86"><span class="id" title="binder">try_decreasing</span></a> <a id="g:84" class="idref" href="#g:84"><span class="id" title="binder">g</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#try_decreasing"><span class="id" title="definition">try_decreasing</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#default_error:81"><span class="id" title="variable">default_error</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#max_acts_per_block:77"><span class="id" title="variable">max_acts_per_block</span></a> (<span class="id" title="keyword">fun</span> <a id="n:85" class="idref" href="#n:85"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#try_repeat:83"><span class="id" title="variable">try_repeat</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#g:84"><span class="id" title="variable">g</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:85"><span class="id" title="variable">n</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Try&nbsp;decreasing&nbsp;max_acts_per_block,&nbsp;this&nbsp;is&nbsp;needed&nbsp;in&nbsp;some&nbsp;cases&nbsp;since&nbsp;there&nbsp;might&nbsp;be&nbsp;blocks<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;generate&nbsp;max_acts_per_block&nbsp;number&nbsp;of&nbsp;valid&nbsp;actions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <a id="rec:93" class="idref" href="#rec:93"><span class="id" title="binder">rec</span></a> <a id="n:87" class="idref" href="#n:87"><span class="id" title="binder">n</span></a> (<a id="lc:88" class="idref" href="#lc:88"><span class="id" title="binder">lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>) : <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:87"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" title="axiom">returnGen</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:88"><span class="id" title="variable">lc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;heuristic:&nbsp;try&nbsp;multiple&nbsp;time&nbsp;and&nbsp;try&nbsp;decreasing&nbsp;for&nbsp;more&nbsp;expected&nbsp;robustness&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> =&gt; <a id="lc':91" class="idref" href="#lc':91"><span class="id" title="binder">lc'</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#try_decreasing:86"><span class="id" title="variable">try_decreasing</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gAdd_block':80"><span class="id" title="variable">gAdd_block'</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:88"><span class="id" title="variable">lc</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc':91"><span class="id" title="variable">lc'</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">lc'</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#rec:89"><span class="id" title="variable">rec</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:87"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc':91"><span class="id" title="variable">lc'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;if&nbsp;no&nbsp;new&nbsp;chain&nbsp;could&nbsp;be&nbsp;generated&nbsp;without&nbsp;error,&nbsp;return&nbsp;the&nbsp;old&nbsp;chain&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">err</span> =&gt; <span class="id" title="axiom">returnGen</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:88"><span class="id" title="variable">lc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#rec:93"><span class="id" title="variable">rec</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#max_length:75"><span class="id" title="variable">max_length</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:73"><span class="id" title="variable">init_lc</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Generator&nbsp;that&nbsp;generates&nbsp;blocks&nbsp;of&nbsp;invalid&nbsp;actions.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;will&nbsp;return&nbsp;a&nbsp;ChainBuilder&nbsp;and&nbsp;a&nbsp;list&nbsp;of&nbsp;actions&nbsp;that&nbsp;will<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cause&nbsp;an&nbsp;error&nbsp;if&nbsp;the&nbsp;actions&nbsp;are&nbsp;added&nbsp;as&nbsp;a&nbsp;new&nbsp;block&nbsp;to&nbsp;the&nbsp;ChainBuilder&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gInvalidAction" class="idref" href="#gInvalidAction"><span class="id" title="definition">gInvalidAction</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:94" class="idref" href="#init_lc:94"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gActOptFromChainSized:95" class="idref" href="#gActOptFromChainSized:95"><span class="id" title="binder">gActOptFromChainSized</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">GOpt</span> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="max_length:96" class="idref" href="#max_length:96"><span class="id" title="binder">max_length</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="act_depth:97" class="idref" href="#act_depth:97"><span class="id" title="binder">act_depth</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="max_acts_per_block:98" class="idref" href="#max_acts_per_block:98"><span class="id" title="binder">max_acts_per_block</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <a id="rec:104" class="idref" href="#rec:104"><span class="id" title="binder">rec</span></a> <a id="n:99" class="idref" href="#n:99"><span class="id" title="binder">n</span></a> (<a id="lc:100" class="idref" href="#lc:100"><span class="id" title="binder">lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>) : <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:99"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" title="axiom">returnGen</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:100"><span class="id" title="variable">lc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="comment">(*&nbsp;max_length&nbsp;was&nbsp;reached&nbsp;without&nbsp;any&nbsp;errors&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="acts:103" class="idref" href="#acts:103"><span class="id" title="binder">acts</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#optToVector"><span class="id" title="definition">optToVector</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#max_acts_per_block:98"><span class="id" title="variable">max_acts_per_block</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gActOptFromChainSized:95"><span class="id" title="variable">gActOptFromChainSized</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:100"><span class="id" title="variable">lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act_depth:97"><span class="id" title="variable">act_depth</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#add_block"><span class="id" title="definition">TraceGens.add_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:100"><span class="id" title="variable">lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:103"><span class="id" title="variable">acts</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <span class="id" title="var">lc'</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#rec:101"><span class="id" title="variable">rec</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:99"><span class="id" title="variable">n</span></a> <span class="id" title="var">lc'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;no&nbsp;new&nbsp;chain&nbsp;could&nbsp;be&nbsp;generated&nbsp;without&nbsp;error,&nbsp;return&nbsp;the&nbsp;trace&nbsp;and&nbsp;action&nbsp;list&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">err</span> =&gt; <span class="id" title="axiom">returnGen</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#lc:100"><span class="id" title="variable">lc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#acts:103"><span class="id" title="variable">acts</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#rec:104"><span class="id" title="variable">rec</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#max_length:96"><span class="id" title="variable">max_length</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:94"><span class="id" title="variable">init_lc</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="get_reachable" class="idref" href="#get_reachable"><span class="id" title="definition">get_reachable</span></a> {<a id="to:105" class="idref" href="#to:105"><span class="id" title="binder">to</span></a>} : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#empty_state"><span class="id" title="definition">empty_state</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:105"><span class="id" title="variable">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:105"><span class="id" title="variable">to</span></a> := <span class="id" title="keyword">fun</span> <a id="t:106" class="idref" href="#t:106"><span class="id" title="binder">t</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#inhabits"><span class="id" title="constructor">inhabits</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#t:106"><span class="id" title="variable">t</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gReachableFromTrace" class="idref" href="#gReachableFromTrace"><span class="id" title="definition">gReachableFromTrace</span></a> {<a id="to:107" class="idref" href="#to:107"><span class="id" title="binder">to</span></a>} (<a id="gtrace:108" class="idref" href="#gtrace:108"><span class="id" title="binder">gtrace</span></a> : <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#empty_state"><span class="id" title="definition">empty_state</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:107"><span class="id" title="variable">to</span></a>)) : <span class="id" title="axiom">G</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:107"><span class="id" title="variable">to</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">bindGen</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#gtrace:108"><span class="id" title="variable">gtrace</span></a> (<span class="id" title="keyword">fun</span> <a id="trace:109" class="idref" href="#trace:109"><span class="id" title="binder">trace</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">returnGen</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#get_reachable"><span class="id" title="definition">get_reachable</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:109"><span class="id" title="variable">trace</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="shrinkReachable" class="idref" href="#shrinkReachable"><span class="id" title="instance">shrinkReachable</span></a> : <span class="id" title="class">Shrink</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="to:110" class="idref" href="#to:110"><span class="id" title="binder">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:110"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a> :=<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">shrink</span> <a id="a:111" class="idref" href="#a:111"><span class="id" title="binder">a</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#a:111"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="genReachableSized" class="idref" href="#genReachableSized"><span class="id" title="instance">genReachableSized</span></a> `{<a id="H1:112" class="idref" href="#H1:112"><span class="id" title="binder">GenSized</span></a> <a id="H1:112" class="idref" href="#H1:112"><span class="id" title="binder">ChainBuilder</span></a>} : <span class="id" title="class">GenSized</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="to:113" class="idref" href="#to:113"><span class="id" title="binder">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#reachable"><span class="id" title="definition">reachable</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:113"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="axiom">bindGen</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <span class="id" title="var">cb</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">trace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">returnGen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#get_reachable"><span class="id" title="definition">get_reachable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trace</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="shrinkChainTraceSig" class="idref" href="#shrinkChainTraceSig"><span class="id" title="instance">shrinkChainTraceSig</span></a> : <span class="id" title="class">Shrink</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="to:114" class="idref" href="#to:114"><span class="id" title="binder">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#empty_state"><span class="id" title="definition">empty_state</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:114"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a> :=<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">shrink</span> <a id="a:115" class="idref" href="#a:115"><span class="id" title="binder">a</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#a:115"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="genChainTraceSigSized" class="idref" href="#genChainTraceSigSized"><span class="id" title="instance">genChainTraceSigSized</span></a> `{<a id="H1:116" class="idref" href="#H1:116"><span class="id" title="binder">GenSized</span></a> <a id="H1:116" class="idref" href="#H1:116"><span class="id" title="binder">ChainBuilder</span></a>} : <span class="id" title="class">GenSized</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="to:117" class="idref" href="#to:117"><span class="id" title="binder">to</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#empty_state"><span class="id" title="definition">empty_state</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:117"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="axiom">bindGen</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <span class="id" title="var">cb</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">trace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="axiom">returnGen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Checker&nbsp;combinators&nbsp;on&nbsp;ChainBuilder&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="forAllChainBuilder" class="idref" href="#forAllChainBuilder"><span class="id" title="definition">forAllChainBuilder</span></a> {<a id="prop:118" class="idref" href="#prop:118"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:119" class="idref" href="#H1:119"><span class="id" title="binder">Checkable</span></a> <a id="H1:119" class="idref" href="#H1:119"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:120" class="idref" href="#maxLength:120"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:121" class="idref" href="#init_lc:121"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:122" class="idref" href="#gTrace:122"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:123" class="idref" href="#pf:123"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:118"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:122"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:121"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:120"><span class="id" title="variable">maxLength</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">shrink</span> (<span class="id" title="keyword">fun</span> <a id="cb:124" class="idref" href="#cb:124"><span class="id" title="binder">cb</span></a> =&gt; <span class="id" title="method">checker</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:123"><span class="id" title="variable">pf</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:124"><span class="id" title="variable">cb</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Gathers&nbsp;all&nbsp;ChainStates&nbsp;from&nbsp;a&nbsp;ChainTrace&nbsp;in&nbsp;a&nbsp;list,&nbsp;appearing&nbsp;in&nbsp;order.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Currently&nbsp;not&nbsp;tail-call&nbsp;optimized.&nbsp;Can&nbsp;be&nbsp;improved&nbsp;if&nbsp;needed.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="trace_states" class="idref" href="#trace_states"><span class="id" title="definition">trace_states</span></a> {<a id="from:125" class="idref" href="#from:125"><span class="id" title="binder">from</span></a> <a id="to:126" class="idref" href="#to:126"><span class="id" title="binder">to</span></a>} (<a id="trace:127" class="idref" href="#trace:127"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:125"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:126"><span class="id" title="variable">to</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:127"><span class="id" title="variable">trace</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> <span class="id" title="var">step</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states:128"><span class="id" title="definition">trace_states</span></a> <span class="id" title="var">trace'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#chainstep_states"><span class="id" title="definition">chainstep_states</span></a> <span class="id" title="var">step</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#clnil"><span class="id" title="constructor">clnil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Variant&nbsp;that&nbsp;only&nbsp;gathers&nbsp;ChainStates&nbsp;of&nbsp;step_block&nbsp;steps&nbsp;in&nbsp;the&nbsp;trace.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="trace_states_step_block" class="idref" href="#trace_states_step_block"><span class="id" title="definition">trace_states_step_block</span></a> {<a id="from:130" class="idref" href="#from:130"><span class="id" title="binder">from</span></a> <a id="to:131" class="idref" href="#to:131"><span class="id" title="binder">to</span></a>} (<a id="trace:132" class="idref" href="#trace:132"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:130"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:131"><span class="id" title="variable">to</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:132"><span class="id" title="variable">trace</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#step_block"><span class="id" title="constructor">Blockchain.step_block</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="keyword">as</span> <span class="id" title="var">step</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states_step_block:133"><span class="id" title="definition">trace_states_step_block</span></a> <span class="id" title="var">trace'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#chainstep_states"><span class="id" title="definition">chainstep_states</span></a> <span class="id" title="var">step</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states_step_block:133"><span class="id" title="definition">trace_states_step_block</span></a> <span class="id" title="var">trace'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#clnil"><span class="id" title="constructor">clnil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Gather&nbsp;execution&nbsp;information&nbsp;for&nbsp;each&nbsp;step_action&nbsp;in&nbsp;a&nbsp;ChainTrace&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="trace_states_step_action" class="idref" href="#trace_states_step_action"><span class="id" title="definition">trace_states_step_action</span></a> {<a id="from:135" class="idref" href="#from:135"><span class="id" title="binder">from</span></a> <a id="to:136" class="idref" href="#to:136"><span class="id" title="binder">to</span></a>} (<a id="trace:137" class="idref" href="#trace:137"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:135"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:136"><span class="id" title="variable">to</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:137"><span class="id" title="variable">trace</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#step_action"><span class="id" title="constructor">Blockchain.step_action</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">act</span> <span class="id" title="var">_</span> <span class="id" title="var">new_acts</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="keyword">as</span> <span class="id" title="var">step</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">from</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">to</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Execution.Test.TestUtils.html#chainstep_states"><span class="id" title="definition">chainstep_states</span></a> <span class="id" title="var">step</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states_step_action:138"><span class="id" title="definition">trace_states_step_action</span></a> <span class="id" title="var">trace'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">act</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">new_acts</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:135"><span class="id" title="variable">from</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:136"><span class="id" title="variable">to</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states_step_action:138"><span class="id" title="definition">trace_states_step_action</span></a> <span class="id" title="var">trace'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#clnil"><span class="id" title="constructor">clnil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Asserts&nbsp;that&nbsp;a&nbsp;ChainState&nbsp;property&nbsp;holds&nbsp;for&nbsp;all&nbsp;step_block&nbsp;ChainStates&nbsp;in&nbsp;a&nbsp;ChainTrace&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ChainTrace_ChainTraceProp" class="idref" href="#ChainTrace_ChainTraceProp"><span class="id" title="definition">ChainTrace_ChainTraceProp</span></a> {<a id="prop:140" class="idref" href="#prop:140"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="from:141" class="idref" href="#from:141"><span class="id" title="binder">from</span></a> <a id="to:142" class="idref" href="#to:142"><span class="id" title="binder">to</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:143" class="idref" href="#H1:143"><span class="id" title="binder">Checkable</span></a> <a id="H1:143" class="idref" href="#H1:143"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trace:144" class="idref" href="#trace:144"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:141"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:142"><span class="id" title="variable">to</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:145" class="idref" href="#pf:145"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:140"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="printOnFail:148" class="idref" href="#printOnFail:148"><span class="id" title="binder">printOnFail</span></a> (<a id="cs:147" class="idref" href="#cs:147"><span class="id" title="binder">cs</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>) : <span class="id" title="definition">Checker</span> := <span class="id" title="definition">whenFail</span> (<span class="id" title="method">show</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs:146"><span class="id" title="variable">cs</span></a>) (<span class="id" title="method">checker</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:145"><span class="id" title="variable">pf</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs:146"><span class="id" title="variable">cs</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trace_list:149" class="idref" href="#trace_list:149"><span class="id" title="binder">trace_list</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states_step_block"><span class="id" title="definition">trace_states_step_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:144"><span class="id" title="variable">trace</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#discard_empty"><span class="id" title="definition">discard_empty</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_list:149"><span class="id" title="variable">trace_list</span></a> (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#conjoin_map"><span class="id" title="definition">conjoin_map</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#printOnFail:148"><span class="id" title="variable">printOnFail</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;--------------------&nbsp;Checker&nbsp;combinators&nbsp;on&nbsp;traces&nbsp;--------------------&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Asserts&nbsp;that&nbsp;a&nbsp;ChainState&nbsp;property&nbsp;holds&nbsp;on&nbsp;all&nbsp;ChainStates&nbsp;in&nbsp;a&nbsp;ChainTrace&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="forAllChainState" class="idref" href="#forAllChainState"><span class="id" title="definition">forAllChainState</span></a> {<a id="prop:150" class="idref" href="#prop:150"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:151" class="idref" href="#H1:151"><span class="id" title="binder">Checkable</span></a> <a id="H1:151" class="idref" href="#H1:151"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:152" class="idref" href="#maxLength:152"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:153" class="idref" href="#init_lc:153"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:154" class="idref" href="#gTrace:154"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:155" class="idref" href="#pf:155"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:150"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="printOnFail:158" class="idref" href="#printOnFail:158"><span class="id" title="binder">printOnFail</span></a> (<a id="cs:157" class="idref" href="#cs:157"><span class="id" title="binder">cs</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>) : <span class="id" title="definition">Checker</span> := <span class="id" title="definition">whenFail</span> (<span class="id" title="method">show</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs:156"><span class="id" title="variable">cs</span></a>) (<span class="id" title="method">checker</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:155"><span class="id" title="variable">pf</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs:156"><span class="id" title="variable">cs</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:154"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:153"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:152"><span class="id" title="variable">maxLength</span></a>) <span class="id" title="method">shrink</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="cb:159" class="idref" href="#cb:159"><span class="id" title="binder">cb</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TestUtils.html#discard_empty"><span class="id" title="definition">discard_empty</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states"><span class="id" title="definition">trace_states</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:159"><span class="id" title="variable">cb</span></a>)) (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#conjoin_map"><span class="id" title="definition">conjoin_map</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#printOnFail:158"><span class="id" title="variable">printOnFail</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Asserts&nbsp;that&nbsp;a&nbsp;ChainState&nbsp;property&nbsp;holds&nbsp;on&nbsp;all&nbsp;step_block&nbsp;ChainStates&nbsp;in&nbsp;a&nbsp;ChainTrace&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="forAllBlocks" class="idref" href="#forAllBlocks"><span class="id" title="definition">forAllBlocks</span></a> {<a id="prop:160" class="idref" href="#prop:160"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:161" class="idref" href="#H1:161"><span class="id" title="binder">Checkable</span></a> <a id="H1:161" class="idref" href="#H1:161"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:162" class="idref" href="#maxLength:162"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:163" class="idref" href="#init_lc:163"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:164" class="idref" href="#gTrace:164"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:165" class="idref" href="#pf:165"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:160"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:164"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:163"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:162"><span class="id" title="variable">maxLength</span></a>) <span class="id" title="method">shrink</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="cb:166" class="idref" href="#cb:166"><span class="id" title="binder">cb</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#ChainTrace_ChainTraceProp"><span class="id" title="definition">ChainTrace_ChainTraceProp</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:166"><span class="id" title="variable">cb</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:165"><span class="id" title="variable">pf</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Checker&nbsp;combinators&nbsp;on&nbsp;ChainTrace,&nbsp;asserting&nbsp;holds&nbsp;a&nbsp;property&nbsp;on<br/>
&nbsp;&nbsp;&nbsp;&nbsp;each&nbsp;pair&nbsp;of&nbsp;succeeding&nbsp;ChainStates&nbsp;in&nbsp;the&nbsp;trace.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="forAllChainStatePairs" class="idref" href="#forAllChainStatePairs"><span class="id" title="definition">forAllChainStatePairs</span></a> {<a id="prop:167" class="idref" href="#prop:167"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:168" class="idref" href="#H1:168"><span class="id" title="binder">Checkable</span></a> <a id="H1:168" class="idref" href="#H1:168"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:169" class="idref" href="#maxLength:169"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:170" class="idref" href="#init_lc:170"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:171" class="idref" href="#gTrace:171"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:172" class="idref" href="#pf:172"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:167"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;helper&nbsp;function&nbsp;folding&nbsp;over&nbsp;the&nbsp;trace*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="last_cstate:176" class="idref" href="#last_cstate:176"><span class="id" title="binder">last_cstate</span></a> {<a id="from:173" class="idref" href="#from:173"><span class="id" title="binder">from</span></a> <a id="to:174" class="idref" href="#to:174"><span class="id" title="binder">to</span></a>} (<a id="trace:175" class="idref" href="#trace:175"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:173"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:174"><span class="id" title="variable">to</span></a>) := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:174"><span class="id" title="variable">to</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <a id="all_statepairs:184" class="idref" href="#all_statepairs:184"><span class="id" title="binder">all_statepairs</span></a> {<a id="from:177" class="idref" href="#from:177"><span class="id" title="binder">from</span></a> <a id="to:178" class="idref" href="#to:178"><span class="id" title="binder">to</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>} (<a id="trace:179" class="idref" href="#trace:179"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:177"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:178"><span class="id" title="variable">to</span></a>) <a id="prev_bstate:180" class="idref" href="#prev_bstate:180"><span class="id" title="binder">prev_bstate</span></a> : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:179"><span class="id" title="variable">trace</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#snoc"><span class="id" title="constructor">snoc</span></a> <span class="id" title="var">trace'</span> <span class="id" title="var">step</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">step</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.Blockchain.html#step_block"><span class="id" title="constructor">Blockchain.step_block</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;next_bstate&nbsp;has&nbsp;acts,&nbsp;bstate_before_step_block&nbsp;has&nbsp;no&nbsp;acts&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">bstate_before_step_block</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">next_bstate</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Execution.Test.TestUtils.html#chainstep_states"><span class="id" title="definition">chainstep_states</span></a> <span class="id" title="var">step</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">conjoin</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[(</span></a><span class="id" title="method">checker</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:172"><span class="id" title="variable">pf</span></a> <span class="id" title="var">next_bstate</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prev_bstate:180"><span class="id" title="variable">prev_bstate</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">);</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#all_statepairs:181"><span class="id" title="variable">all_statepairs</span></a> <span class="id" title="var">trace'</span> <span class="id" title="var">bstate_before_step_block</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#all_statepairs:181"><span class="id" title="variable">all_statepairs</span></a> <span class="id" title="var">trace'</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prev_bstate:180"><span class="id" title="variable">prev_bstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.ChainedList.html#clnil"><span class="id" title="constructor">clnil</span></a> =&gt; <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:171"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:170"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:169"><span class="id" title="variable">maxLength</span></a>) <span class="id" title="method">shrink</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="cb:185" class="idref" href="#cb:185"><span class="id" title="binder">cb</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#all_statepairs:184"><span class="id" title="variable">all_statepairs</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:185"><span class="id" title="variable">cb</span></a>) (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#last_cstate:176"><span class="id" title="variable">last_cstate</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:185"><span class="id" title="variable">cb</span></a>))).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Asserts&nbsp;that&nbsp;property&nbsp;holds&nbsp;on&nbsp;all&nbsp;action&nbsp;evaluations&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="forAllActionExecution" class="idref" href="#forAllActionExecution"><span class="id" title="definition">forAllActionExecution</span></a> {<a id="prop:186" class="idref" href="#prop:186"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:187" class="idref" href="#H1:187"><span class="id" title="binder">Checkable</span></a> <a id="H1:187" class="idref" href="#H1:187"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:188" class="idref" href="#maxLength:188"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:189" class="idref" href="#init_lc:189"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:190" class="idref" href="#gTrace:190"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:191" class="idref" href="#pf:191"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:186"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="printOnFail:195" class="idref" href="#printOnFail:195"><span class="id" title="binder">printOnFail</span></a> <a id="x:194" class="idref" href="#x:194"><span class="id" title="binder">x</span></a> : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">action</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">new_acts</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cs_from</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cs_to</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#x:192"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">whenFail</span> (<span class="id" title="method">show</span> <span class="id" title="var">cs_from</span>) (<span class="id" title="method">checker</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:191"><span class="id" title="variable">pf</span></a> <span class="id" title="var">action</span> <span class="id" title="var">new_acts</span> <span class="id" title="var">cs_from</span> <span class="id" title="var">cs_to</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trace_list:197" class="idref" href="#trace_list:197"><span class="id" title="binder">trace_list</span></a> <a id="cb:196" class="idref" href="#cb:196"><span class="id" title="binder">cb</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states_step_action"><span class="id" title="definition">trace_states_step_action</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:196"><span class="id" title="variable">cb</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:190"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:189"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:188"><span class="id" title="variable">maxLength</span></a>) <span class="id" title="method">shrink</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="cb:198" class="idref" href="#cb:198"><span class="id" title="binder">cb</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TestUtils.html#discard_empty"><span class="id" title="definition">discard_empty</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_list:197"><span class="id" title="variable">trace_list</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:198"><span class="id" title="variable">cb</span></a>) (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#conjoin_map"><span class="id" title="definition">conjoin_map</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#printOnFail:195"><span class="id" title="variable">printOnFail</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Asserts&nbsp;that&nbsp;a&nbsp;boolean&nbsp;predicate&nbsp;holds&nbsp;for&nbsp;at&nbsp;least&nbsp;one&nbsp;ChainState&nbsp;in&nbsp;the&nbsp;given&nbsp;ChainTrace&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="existsb_chaintrace" class="idref" href="#existsb_chaintrace"><span class="id" title="definition">existsb_chaintrace</span></a> {<a id="from:199" class="idref" href="#from:199"><span class="id" title="binder">from</span></a> <a id="to:200" class="idref" href="#to:200"><span class="id" title="binder">to</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:201" class="idref" href="#pf:201"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trace:202" class="idref" href="#trace:202"><span class="id" title="binder">trace</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainTrace"><span class="id" title="definition">ChainTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#from:199"><span class="id" title="variable">from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#to:200"><span class="id" title="variable">to</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:201"><span class="id" title="variable">pf</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states"><span class="id" title="definition">trace_states</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:202"><span class="id" title="variable">trace</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Asserts&nbsp;that&nbsp;a&nbsp;ChainState&nbsp;satisfying&nbsp;a&nbsp;given&nbsp;predicate&nbsp;is&nbsp;reachable&nbsp;from&nbsp;the&nbsp;given&nbsp;trace&nbsp;generator.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reachableFromSized_chaintrace" class="idref" href="#reachableFromSized_chaintrace"><span class="id" title="definition">reachableFromSized_chaintrace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:203" class="idref" href="#maxLength:203"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:204" class="idref" href="#init_lc:204"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:205" class="idref" href="#gTrace:205"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:206" class="idref" href="#pf:206"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#existsP"><span class="id" title="definition">existsP</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:205"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:204"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:203"><span class="id" title="variable">maxLength</span></a>) (<span class="id" title="keyword">fun</span> <a id="cb:207" class="idref" href="#cb:207"><span class="id" title="binder">cb</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#existsb_chaintrace"><span class="id" title="definition">existsb_chaintrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:206"><span class="id" title="variable">pf</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:207"><span class="id" title="variable">cb</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reachableFrom_chaintrace" class="idref" href="#reachableFrom_chaintrace"><span class="id" title="definition">reachableFrom_chaintrace</span></a> <a id="init_lc:208" class="idref" href="#init_lc:208"><span class="id" title="binder">init_lc</span></a> <a id="gTrace:209" class="idref" href="#gTrace:209"><span class="id" title="binder">gTrace</span></a> <a id="pf:210" class="idref" href="#pf:210"><span class="id" title="binder">pf</span></a> : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">sized</span> (<span class="id" title="keyword">fun</span> <a id="n:211" class="idref" href="#n:211"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#reachableFromSized_chaintrace"><span class="id" title="definition">reachableFromSized_chaintrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#n:211"><span class="id" title="variable">n</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:208"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:209"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:210"><span class="id" title="variable">pf</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;property&nbsp;states&nbsp;that&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;reachable&nbsp;chainstate&nbsp;satisfying&nbsp;the&nbsp;reachable_prop&nbsp;predicate,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;all&nbsp;succeeding&nbsp;chainstates&nbsp;must&nbsp;satisfy&nbsp;implied_prop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reachableFrom_implies_chaintracePropSized" class="idref" href="#reachableFrom_implies_chaintracePropSized"><span class="id" title="definition">reachableFrom_implies_chaintracePropSized</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:212" class="idref" href="#A:212"><span class="id" title="binder">A</span></a> <a id="prop:213" class="idref" href="#prop:213"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:214" class="idref" href="#H1:214"><span class="id" title="binder">Checkable</span></a> <a id="H1:214" class="idref" href="#H1:214"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:215" class="idref" href="#maxLength:215"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_cb:216" class="idref" href="#init_cb:216"><span class="id" title="binder">init_cb</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:217" class="idref" href="#gTrace:217"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="reachable_prop:218" class="idref" href="#reachable_prop:218"><span class="id" title="binder">reachable_prop</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#A:212"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="implied_prop:219" class="idref" href="#implied_prop:219"><span class="id" title="binder">implied_prop</span></a> : <a class="idref" href="ConCert.Execution.Test.TraceGens.html#A:212"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:213"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:217"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_cb:216"><span class="id" title="variable">init_cb</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:215"><span class="id" title="variable">maxLength</span></a>) <span class="id" title="method">shrink</span><br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="cb:220" class="idref" href="#cb:220"><span class="id" title="binder">cb</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trace:221" class="idref" href="#trace:221"><span class="id" title="binder">trace</span></a> := <a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:220"><span class="id" title="variable">cb</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="reachable_prop_bool:222" class="idref" href="#reachable_prop_bool:222"><span class="id" title="binder">reachable_prop_bool</span></a> := <a class="idref" href="ConCert.Utils.Extras.html#isSome"><span class="id" title="definition">isSome</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#:::x_'o'_x"><span class="id" title="notation">o</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#reachable_prop:218"><span class="id" title="variable">reachable_prop</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tracelist:223" class="idref" href="#tracelist:223"><span class="id" title="binder">tracelist</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states_step_block"><span class="id" title="definition">trace_states_step_block</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace:221"><span class="id" title="variable">trace</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#split_at_first_satisfying"><span class="id" title="definition">split_at_first_satisfying</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#reachable_prop_bool:222"><span class="id" title="variable">reachable_prop_bool</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#tracelist:223"><span class="id" title="variable">tracelist</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>(<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">xs</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">pre</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">post</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;last_step&nbsp;is&nbsp;the&nbsp;element&nbsp;satisfying&nbsp;reachable_prop_bool&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="last_step:224" class="idref" href="#last_step:224"><span class="id" title="binder">last_step</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">List.last</span></a> <span class="id" title="var">pre</span> <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#isSomeCheck"><span class="id" title="definition">isSomeCheck</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#reachable_prop:218"><span class="id" title="variable">reachable_prop</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#last_step:224"><span class="id" title="variable">last_step</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="a:225" class="idref" href="#a:225"><span class="id" title="binder">a</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;assert&nbsp;that&nbsp;implied_prop&nbsp;holds&nbsp;on&nbsp;the&nbsp;post&nbsp;trace&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#implied_prop:219"><span class="id" title="variable">implied_prop</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#a:225"><span class="id" title="variable">a</span></a> <span class="id" title="var">pre</span> <span class="id" title="var">post</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="notation">==&gt;</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;if&nbsp;pre&nbsp;tests&nbsp;true,&nbsp;then&nbsp;post&nbsp;tests&nbsp;true,&nbsp;for&nbsp;all&nbsp;tested&nbsp;execution&nbsp;traces&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_post_assertion" class="idref" href="#pre_post_assertion"><span class="id" title="definition">pre_post_assertion</span></a> {<a id="Msg:226" class="idref" href="#Msg:226"><span class="id" title="binder">Msg</span></a> <a id="State:227" class="idref" href="#State:227"><span class="id" title="binder">State</span></a> <a id="prop:228" class="idref" href="#prop:228"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:229" class="idref" href="#H1:229"><span class="id" title="binder">Checkable</span></a> <a id="H1:229" class="idref" href="#H1:229"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H2:230" class="idref" href="#H2:230"><span class="id" title="binder">Serializable</span></a> <a id="H2:230" class="idref" href="#H2:230"><span class="id" title="binder">Msg</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H3:231" class="idref" href="#H3:231"><span class="id" title="binder">Serializable</span></a> <a id="H3:231" class="idref" href="#H3:231"><span class="id" title="binder">State</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H4:232" class="idref" href="#H4:232"><span class="id" title="binder">Show</span></a> <a id="H4:232" class="idref" href="#H4:232"><span class="id" title="binder">Msg</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:233" class="idref" href="#maxLength:233"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_chain:234" class="idref" href="#init_chain:234"><span class="id" title="binder">init_chain</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:235" class="idref" href="#gTrace:235"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="caddr:236" class="idref" href="#caddr:236"><span class="id" title="binder">caddr</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pre:237" class="idref" href="#pre:237"><span class="id" title="binder">pre</span></a> : <a class="idref" href="ConCert.Execution.Test.TraceGens.html#State:227"><span class="id" title="variable">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#Msg:226"><span class="id" title="variable">Msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="post:238" class="idref" href="#post:238"><span class="id" title="binder">post</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ContractCallContext"><span class="id" title="record">ContractCallContext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#State:227"><span class="id" title="variable">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#Msg:226"><span class="id" title="variable">Msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#State:227"><span class="id" title="variable">State</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ActionBody"><span class="id" title="inductive">ActionBody</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:228"><span class="id" title="variable">prop</span></a>) : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="action_bodies:241" class="idref" href="#action_bodies:241"><span class="id" title="binder">action_bodies</span></a> <a id="actions:239" class="idref" href="#actions:239"><span class="id" title="binder">actions</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="act:240" class="idref" href="#act:240"><span class="id" title="binder">act</span></a> =&gt; <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:240"><span class="id" title="variable">act</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#act_body"><span class="id" title="projection">act_body</span></a>)) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#actions:239"><span class="id" title="variable">actions</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="post_helper:254" class="idref" href="#post_helper:254"><span class="id" title="binder">post_helper</span></a> <a id="env:248" class="idref" href="#env:248"><span class="id" title="binder">env</span></a> <a id="cctx:249" class="idref" href="#cctx:249"><span class="id" title="binder">cctx</span></a> <a id="post_cstate:250" class="idref" href="#post_cstate:250"><span class="id" title="binder">post_cstate</span></a> <a id="new_acts:251" class="idref" href="#new_acts:251"><span class="id" title="binder">new_acts</span></a> <a id="cstate:252" class="idref" href="#cstate:252"><span class="id" title="binder">cstate</span></a> <a id="msg:253" class="idref" href="#msg:253"><span class="id" title="binder">msg</span></a> : <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">whenFail</span> ("On Msg: " <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Strings.String.html#169ad156fbc6036a53a0338819a2b301"><span class="id" title="notation">++</span></a> <span class="id" title="method">show</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#msg:247"><span class="id" title="variable">msg</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="method">checker</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#post:238"><span class="id" title="variable">post</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#env:242"><span class="id" title="variable">env</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cctx:243"><span class="id" title="variable">cctx</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cstate:246"><span class="id" title="variable">cstate</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#msg:247"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#post_cstate:244"><span class="id" title="variable">post_cstate</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#action_bodies:241"><span class="id" title="variable">action_bodies</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#new_acts:245"><span class="id" title="variable">new_acts</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="stepProp:264" class="idref" href="#stepProp:264"><span class="id" title="binder">stepProp</span></a> (<a id="act:255" class="idref" href="#act:255"><span class="id" title="binder">act</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>) (<a id="new_acts:256" class="idref" href="#new_acts:256"><span class="id" title="binder">new_acts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a>) (<a id="cs_from:257" class="idref" href="#cs_from:257"><span class="id" title="binder">cs_from</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>) (<a id="cs_to:258" class="idref" href="#cs_to:258"><span class="id" title="binder">cs_to</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="env_from:259" class="idref" href="#env_from:259"><span class="id" title="binder">env_from</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs_from:257"><span class="id" title="variable">cs_from</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#chain_state_env"><span class="id" title="projection">chain_state_env</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="env_to:260" class="idref" href="#env_to:260"><span class="id" title="binder">env_to</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a> := <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs_to:258"><span class="id" title="variable">cs_to</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#chain_state_env"><span class="id" title="projection">chain_state_env</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="amount:261" class="idref" href="#amount:261"><span class="id" title="binder">amount</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:255"><span class="id" title="variable">act</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#act_body"><span class="id" title="projection">act_body</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.Blockchain.html#act_call"><span class="id" title="constructor">act_call</span></a> <span class="id" title="var">_</span> <span class="id" title="var">amount</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">amount</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; 0%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="new_balance:262" class="idref" href="#new_balance:262"><span class="id" title="binder">new_balance</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:255"><span class="id" title="variable">act</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#act_from"><span class="id" title="projection">act_from</span></a>) <a class="idref" href="ConCert.Execution.Blockchain.html#6f617e0e5500b437e5aeb1eaa876d41f"><span class="id" title="notation">=?</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#caddr:236"><span class="id" title="variable">caddr</span></a>)%<span class="id" title="var">address</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#env_from:259"><span class="id" title="variable">env_from</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#env_account_balances"><span class="id" title="projection">env_account_balances</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#caddr:236"><span class="id" title="variable">caddr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ConCert.Execution.Test.TraceGens.html#env_from:259"><span class="id" title="variable">env_from</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#env_account_balances"><span class="id" title="projection">env_account_balances</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#caddr:236"><span class="id" title="variable">caddr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#amount:261"><span class="id" title="variable">amount</span></a>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cctx:263" class="idref" href="#cctx:263"><span class="id" title="binder">cctx</span></a> := <a class="idref" href="ConCert.Execution.Blockchain.html#build_ctx"><span class="id" title="constructor">build_ctx</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:255"><span class="id" title="variable">act</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#act_origin"><span class="id" title="projection">act_origin</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:255"><span class="id" title="variable">act</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#act_from"><span class="id" title="projection">act_from</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#caddr:236"><span class="id" title="variable">caddr</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#new_balance:262"><span class="id" title="variable">new_balance</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#amount:261"><span class="id" title="variable">amount</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#act:255"><span class="id" title="variable">act</span></a>.(<a class="idref" href="ConCert.Execution.Blockchain.html#act_body"><span class="id" title="projection">act_body</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ConCert.Execution.Blockchain.html#act_call"><span class="id" title="constructor">act_call</span></a> <span class="id" title="var">to</span> <span class="id" title="var">_</span> <span class="id" title="var">ser_msg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Execution.Blockchain.html#address_eqb"><span class="id" title="method">address_eqb</span></a> <span class="id" title="var">to</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#caddr:236"><span class="id" title="variable">caddr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> @<a class="idref" href="ConCert.Execution.Serializable.html#deserialize"><span class="id" title="method">deserialize</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#Msg:226"><span class="id" title="variable">Msg</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ser_msg</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">msg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#get_contract_state"><span class="id" title="definition">get_contract_state</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#State:227"><span class="id" title="variable">State</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#env_from:259"><span class="id" title="variable">env_from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#caddr:236"><span class="id" title="variable">caddr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">cstate_from</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#pre:237"><span class="id" title="variable">pre</span></a> <span class="id" title="var">cstate_from</span> <span class="id" title="var">msg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#get_contract_state"><span class="id" title="definition">get_contract_state</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#State:227"><span class="id" title="variable">State</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#env_to:260"><span class="id" title="variable">env_to</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#caddr:236"><span class="id" title="variable">caddr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">cstate_to</span> =&gt; (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#post_helper:254"><span class="id" title="variable">post_helper</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#env_from:259"><span class="id" title="variable">env_from</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cctx:263"><span class="id" title="variable">cctx</span></a> <span class="id" title="var">cstate_to</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#new_acts:256"><span class="id" title="variable">new_acts</span></a> <span class="id" title="var">cstate_from</span> <span class="id" title="var">msg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="comment">(*&nbsp;TODO:&nbsp;should&nbsp;be&nbsp;discarded!*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="method">checker</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TraceGens.html#forAllActionExecution"><span class="id" title="definition">forAllActionExecution</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:233"><span class="id" title="variable">maxLength</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_chain:234"><span class="id" title="variable">init_chain</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:235"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#stepProp:264"><span class="id" title="variable">stepProp</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;any&nbsp;ChainState&nbsp;in&nbsp;a&nbsp;ChainTrace&nbsp;if&nbsp;pf&nbsp;tests&nbsp;true&nbsp;on&nbsp;all&nbsp;previous&nbsp;ChainStates&nbsp;in&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ChainTrace&nbsp;then&nbsp;implied_prop&nbsp;tests&nbsp;true,&nbsp;for&nbsp;all&nbsp;tested&nbsp;execution&nbsp;traces*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="forAllChainState_implication" class="idref" href="#forAllChainState_implication"><span class="id" title="definition">forAllChainState_implication</span></a> {<a id="prop:265" class="idref" href="#prop:265"><span class="id" title="binder">prop</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H1:266" class="idref" href="#H1:266"><span class="id" title="binder">Checkable</span></a> <a id="H1:266" class="idref" href="#H1:266"><span class="id" title="binder">prop</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="maxLength:267" class="idref" href="#maxLength:267"><span class="id" title="binder">maxLength</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="init_lc:268" class="idref" href="#init_lc:268"><span class="id" title="binder">init_lc</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="gTrace:269" class="idref" href="#gTrace:269"><span class="id" title="binder">gTrace</span></a> : <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#ChainBuilder"><span class="id" title="instance">ChainBuilder</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="pf:270" class="idref" href="#pf:270"><span class="id" title="binder">pf</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="implied_prop:271" class="idref" href="#implied_prop:271"><span class="id" title="binder">implied_prop</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#prop:265"><span class="id" title="variable">prop</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="printOnFail:274" class="idref" href="#printOnFail:274"><span class="id" title="binder">printOnFail</span></a> (<a id="cs:273" class="idref" href="#cs:273"><span class="id" title="binder">cs</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>) : <span class="id" title="definition">Checker</span> := <span class="id" title="definition">whenFail</span> (<span class="id" title="method">show</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs:272"><span class="id" title="variable">cs</span></a>) (<span class="id" title="method">checker</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#implied_prop:271"><span class="id" title="variable">implied_prop</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cs:272"><span class="id" title="variable">cs</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="map_implication:281" class="idref" href="#map_implication:281"><span class="id" title="binder">map_implication</span></a> (<a id="states:280" class="idref" href="#states:280"><span class="id" title="binder">states</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ConCert.Execution.Blockchain.html#ChainState"><span class="id" title="record">ChainState</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="definition">Checker</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:278" class="idref" href="#pat:278"><span class="id" title="binder">(</span></a><a id="pat:278" class="idref" href="#pat:278"><span class="id" title="binder">b</span></a><a id="pat:278" class="idref" href="#pat:278"><span class="id" title="binder">,</span></a> <a id="pat:278" class="idref" href="#pat:278"><span class="id" title="binder">checkers</span></a><a id="pat:278" class="idref" href="#pat:278"><span class="id" title="binder">)</span></a> <a id="state:279" class="idref" href="#state:279"><span class="id" title="binder">state</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#b:277"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Execution.Test.TraceGens.html#pf:270"><span class="id" title="variable">pf</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#state:279"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><span class="id" title="definition">implication</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#b:277"><span class="id" title="variable">b</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#printOnFail:274"><span class="id" title="variable">printOnFail</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#state:279"><span class="id" title="variable">state</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#checkers:276"><span class="id" title="variable">checkers</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="ConCert.Execution.Test.TraceGens.html#states:275"><span class="id" title="variable">states</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">forAllShrink</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#gTrace:269"><span class="id" title="variable">gTrace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#init_lc:268"><span class="id" title="variable">init_lc</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#maxLength:267"><span class="id" title="variable">maxLength</span></a>) <span class="id" title="method">shrink</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="cb:282" class="idref" href="#cb:282"><span class="id" title="binder">cb</span></a> =&gt; <span class="id" title="definition">conjoin</span> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#map_implication:281"><span class="id" title="variable">map_implication</span></a> (<a class="idref" href="ConCert.Execution.Test.TraceGens.html#trace_states"><span class="id" title="definition">trace_states</span></a> (<a class="idref" href="ConCert.Execution.Blockchain.html#builder_trace"><span class="id" title="method">builder_trace</span></a> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#cb:282"><span class="id" title="variable">cb</span></a>)))).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Execution.Test.TraceGens.html#TraceGens"><span class="id" title="section">TraceGens</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="https://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a> and <a href="https://github.com/jgallen23/toc">TOC</a>
</div>
</div>
<script>
  const elements = document.getElementsByClassName("libtitle");
  while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
  }
  if (window.location.pathname.endsWith("/toc.html")) {
      const jstocDiv = document.getElementById("js-toc");
      jstocDiv.classList.remove("toc");
      jstocDiv.classList.add("jstoc-hidden");
      const jstocHeaderDiv = document.getElementById("js-toc-header");
      jstocHeaderDiv.classList.add("jstoc-hidden");
      const mainDiv = document.getElementById("main");
      mainDiv.classList.add("jstoc-hidden-main");
      const toggleDiv = document.getElementById("toggle-toc");
      toggleDiv.classList.add("jstoc-hidden");
  }
  console.log(window.location.pathname);
</script>
<script type="text/javascript" src="toc.js"></script>
</body>

</html>
