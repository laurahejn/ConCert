<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<link href="toc.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
      <span id="toggle-toc">Contents</span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/AU-COBRA/ConCert" target="_balnk">Project Page</a>
      <a href="index.html">Index</a>
      <a href="toc.html">Table of contents</a>
    </span>
</div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="js-toc" class="toc" data-toc="h1,h2,h3,h4" data-toc-container="doc" data-toc-offset="-40">
      <div id="js-toc-header" class="toc-header">Contents:</div>
    </div>
    <div id="main">
<h1 class="libtitle">Library ConCert.Examples.iTokenBuggy.iTokenBuggyGens</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Blockchain.html#"><span class="id" title="library">Blockchain</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Containers.html#"><span class="id" title="library">Containers</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Serializable.html#"><span class="id" title="library">Serializable</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Execution.Test</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Execution.Test.QCTest.html#"><span class="id" title="library">QCTest</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">ConCert.Examples.iTokenBuggy</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#"><span class="id" title="library">iTokenBuggy</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#MonadNotation"><span class="id" title="module">MonadNotation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>. <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <a id="iTokenBuggyGensInfo" class="idref" href="#iTokenBuggyGensInfo"><span class="id" title="module">iTokenBuggyGensInfo</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a id="iTokenBuggyGensInfo.contract_addr" class="idref" href="#iTokenBuggyGensInfo.contract_addr"><span class="id" title="axiom">contract_addr</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a id="iTokenBuggyGensInfo.gAccount" class="idref" href="#iTokenBuggyGensInfo.gAccount"><span class="id" title="axiom">gAccount</span></a> : <span class="id" title="axiom">G</span> <a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGensInfo"><span class="id" title="module">iTokenBuggyGensInfo</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="iTokenBuggyGens" class="idref" href="#iTokenBuggyGens"><span class="id" title="module">iTokenBuggyGens</span></a> (<span class="id" title="var">Info</span> : <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGensInfo"><span class="id" title="module">iTokenBuggyGensInfo</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#Info"><span class="id" title="module">Info</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="ConCert.Execution.Serializable.html#SerializedValue"><span class="id" title="record">SerializedValue</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="ConCert.Execution.Serializable.html#deserialize"><span class="id" title="method">deserialize</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="ConCert.Execution.Serializable.html#serialize"><span class="id" title="method">serialize</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iTokenBuggyGens.serializeMsg" class="idref" href="#iTokenBuggyGens.serializeMsg"><span class="id" title="definition">serializeMsg</span></a> := @<a class="idref" href="ConCert.Execution.Serializable.html#serialize"><span class="id" title="method">serialize</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#Msg"><span class="id" title="inductive">iTokenBuggy.Msg</span></a> <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">N_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iTokenBuggyGens.sampleFMapOpt" class="idref" href="#iTokenBuggyGens.sampleFMapOpt"><span class="id" title="definition">sampleFMapOpt</span></a> {<a id="A:3" class="idref" href="#A:3"><span class="id" title="binder">A</span></a> <a id="B:4" class="idref" href="#B:4"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H:6" class="idref" href="#H:6"><span class="id" title="binder">countable.Countable</span></a> <a id="H:6" class="idref" href="#H:6"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H0:7" class="idref" href="#H0:7"><span class="id" title="binder">base.EqDecision</span></a> <a id="H0:7" class="idref" href="#H0:7"><span class="id" title="binder">A</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:8" class="idref" href="#m:8"><span class="id" title="binder">m</span></a> : <a class="idref" href="ConCert.Execution.Containers.html#FMap"><span class="id" title="abbreviation">FMap</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#A:3"><span class="id" title="variable">A</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#B:4"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">GOpt</span> (<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#A:3"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#B:4"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#sampleFMapOpt"><span class="id" title="definition">TestUtils.sampleFMapOpt</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#m:8"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Note:&nbsp;not&nbsp;optimal&nbsp;implementation.&nbsp;Should&nbsp;filter&nbsp;on<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balances&nbsp;map&nbsp;instead&nbsp;of&nbsp;first&nbsp;sampling&nbsp;and&nbsp;then&nbsp;filtering&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iTokenBuggyGens.gApprove" class="idref" href="#iTokenBuggyGens.gApprove"><span class="id" title="definition">gApprove</span></a> (<a id="state:9" class="idref" href="#state:9"><span class="id" title="binder">state</span></a> : <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#State"><span class="id" title="record">iTokenBuggy.State</span></a>) : <span class="id" title="definition">GOpt</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#Msg"><span class="id" title="inductive">Msg</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">((</span></a><a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">addr1</span></a><a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">,</span></a> <a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">balance1</span></a><a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">),</span></a> <a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">(</span></a><a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">addr2</span></a><a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">,</span></a> <a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">balance2</span></a><a id="pat:14" class="idref" href="#pat:14"><span class="id" title="binder">))</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#sample2UniqueFMapOpt"><span class="id" title="definition">sample2UniqueFMapOpt</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:9"><span class="id" title="variable">state</span></a>.(<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#balances"><span class="id" title="projection">balances</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.NArith.BinNat.html#b39870dee55afcd85c6b795fb34de165"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#balance1:12"><span class="id" title="variable">balance1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a id="amount:16" class="idref" href="#amount:16"><span class="id" title="binder">amount</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="axiom">choose</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#balance1:12"><span class="id" title="variable">balance1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#returnGenSome"><span class="id" title="definition">returnGenSome</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#addr1:13"><span class="id" title="variable">addr1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#approve"><span class="id" title="constructor">approve</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#addr2:11"><span class="id" title="variable">addr2</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#amount:16"><span class="id" title="variable">amount</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.NArith.BinNat.html#b39870dee55afcd85c6b795fb34de165"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#balance2:10"><span class="id" title="variable">balance2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a id="amount:15" class="idref" href="#amount:15"><span class="id" title="binder">amount</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="axiom">choose</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#balance2:10"><span class="id" title="variable">balance2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#returnGenSome"><span class="id" title="definition">returnGenSome</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#addr2:11"><span class="id" title="variable">addr2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#approve"><span class="id" title="constructor">approve</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#addr1:13"><span class="id" title="variable">addr1</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#amount:15"><span class="id" title="variable">amount</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="axiom">returnGen</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iTokenBuggyGens.gTransfer_from" class="idref" href="#iTokenBuggyGens.gTransfer_from"><span class="id" title="definition">gTransfer_from</span></a> (<a id="state:17" class="idref" href="#state:17"><span class="id" title="binder">state</span></a> : <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#State"><span class="id" title="record">iTokenBuggy.State</span></a>) : <span class="id" title="definition">GOpt</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#Msg"><span class="id" title="inductive">Msg</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:20" class="idref" href="#pat:20"><span class="id" title="binder">(</span></a><a id="pat:20" class="idref" href="#pat:20"><span class="id" title="binder">allower</span></a><a id="pat:20" class="idref" href="#pat:20"><span class="id" title="binder">,</span></a> <a id="pat:20" class="idref" href="#pat:20"><span class="id" title="binder">allowance_map</span></a><a id="pat:20" class="idref" href="#pat:20"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.sampleFMapOpt"><span class="id" title="definition">sampleFMapOpt</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:17"><span class="id" title="variable">state</span></a>.(<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#allowances"><span class="id" title="projection">allowances</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:23" class="idref" href="#pat:23"><span class="id" title="binder">(</span></a><a id="pat:23" class="idref" href="#pat:23"><span class="id" title="binder">delegate</span></a><a id="pat:23" class="idref" href="#pat:23"><span class="id" title="binder">,</span></a> <a id="pat:23" class="idref" href="#pat:23"><span class="id" title="binder">allowance</span></a><a id="pat:23" class="idref" href="#pat:23"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.sampleFMapOpt"><span class="id" title="definition">sampleFMapOpt</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#allowance_map:18"><span class="id" title="variable">allowance_map</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:25" class="idref" href="#pat:25"><span class="id" title="binder">(</span></a><a id="pat:25" class="idref" href="#pat:25"><span class="id" title="binder">receiver</span></a><a id="pat:25" class="idref" href="#pat:25"><span class="id" title="binder">,</span></a><a id="pat:25" class="idref" href="#pat:25"><span class="id" title="binder">_</span></a><a id="pat:25" class="idref" href="#pat:25"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.sampleFMapOpt"><span class="id" title="definition">sampleFMapOpt</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:17"><span class="id" title="variable">state</span></a>.(<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#balances"><span class="id" title="projection">balances</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="allower_balance:26" class="idref" href="#allower_balance:26"><span class="id" title="binder">allower_balance</span></a> := (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#FMap_find_"><span class="id" title="definition">FMap_find_</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#allower:19"><span class="id" title="variable">allower</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:17"><span class="id" title="variable">state</span></a>.(<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#balances"><span class="id" title="projection">balances</span></a>) 0) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="amount:27" class="idref" href="#amount:27"><span class="id" title="binder">amount</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">(</span></a><span class="id" title="keyword">if</span> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#allower_balance:26"><span class="id" title="variable">allower_balance</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.NArith.BinNat.html#59a5ff4a6cbb127625aba1a377a243d1"><span class="id" title="notation">=?</span></a> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="axiom">returnGen</span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="axiom">choose</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.NArith.BinNat.html#N.min"><span class="id" title="definition">N.min</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#allowance:21"><span class="id" title="variable">allowance</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#allower_balance:26"><span class="id" title="variable">allower_balance</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#returnGenSome"><span class="id" title="definition">returnGenSome</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#delegate:22"><span class="id" title="variable">delegate</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#transfer_from"><span class="id" title="constructor">transfer_from</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#allower:19"><span class="id" title="variable">allower</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#receiver:24"><span class="id" title="variable">receiver</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#amount:27"><span class="id" title="variable">amount</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iTokenBuggyGens.gMint" class="idref" href="#iTokenBuggyGens.gMint"><span class="id" title="definition">gMint</span></a> (<a id="c:28" class="idref" href="#c:28"><span class="id" title="binder">c</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="state:29" class="idref" href="#state:29"><span class="id" title="binder">state</span></a> : <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#State"><span class="id" title="record">iTokenBuggy.State</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="definition">GOpt</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#Msg"><span class="id" title="inductive">Msg</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="addr:30" class="idref" href="#addr:30"><span class="id" title="binder">addr</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#Info.gAccount"><span class="id" title="axiom">gAccount</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;fix&nbsp;nr&nbsp;of&nbsp;minted&nbsp;tokens&nbsp;to&nbsp;0,&nbsp;1,&nbsp;or&nbsp;2*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="amount:31" class="idref" href="#amount:31"><span class="id" title="binder">amount</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="axiom">choose</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 2<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#returnGenSome"><span class="id" title="definition">returnGenSome</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#addr:30"><span class="id" title="variable">addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#mint"><span class="id" title="constructor">mint</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#amount:31"><span class="id" title="variable">amount</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iTokenBuggyGens.gBurn" class="idref" href="#iTokenBuggyGens.gBurn"><span class="id" title="definition">gBurn</span></a> (<a id="state:32" class="idref" href="#state:32"><span class="id" title="binder">state</span></a> : <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#State"><span class="id" title="record">iTokenBuggy.State</span></a>) : <span class="id" title="definition">GOpt</span> (<a class="idref" href="ConCert.Execution.Blockchain.html#Address"><span class="id" title="method">Address</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#Msg"><span class="id" title="inductive">Msg</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:37" class="idref" href="#pat:37"><span class="id" title="binder">(</span></a><a id="pat:37" class="idref" href="#pat:37"><span class="id" title="binder">addr</span></a><a id="pat:37" class="idref" href="#pat:37"><span class="id" title="binder">,</span></a> <a id="pat:37" class="idref" href="#pat:37"><span class="id" title="binder">balance</span></a><a id="pat:37" class="idref" href="#pat:37"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Execution.Test.TestUtils.html#sampleFMapOpt_filter"><span class="id" title="definition">sampleFMapOpt_filter</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:32"><span class="id" title="variable">state</span></a>.(<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#balances"><span class="id" title="projection">balances</span></a>) (<span class="id" title="keyword">fun</span> '<a id="pat:34" class="idref" href="#pat:34"><span class="id" title="binder">(</span></a><a id="pat:34" class="idref" href="#pat:34"><span class="id" title="binder">_</span></a><a id="pat:34" class="idref" href="#pat:34"><span class="id" title="binder">,</span></a><a id="pat:34" class="idref" href="#pat:34"><span class="id" title="binder">balance</span></a><a id="pat:34" class="idref" href="#pat:34"><span class="id" title="binder">)</span></a> =&gt; 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.NArith.BinNat.html#b39870dee55afcd85c6b795fb34de165"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#balance:33"><span class="id" title="variable">balance</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;purposely&nbsp;give&nbsp;it&nbsp;a&nbsp;small&nbsp;chance&nbsp;to&nbsp;try&nbsp;to&nbsp;burn&nbsp;more&nbsp;than&nbsp;allowed,&nbsp;hence&nbsp;+2*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="amount:38" class="idref" href="#amount:38"><span class="id" title="binder">amount</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="axiom">choose</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#balance:35"><span class="id" title="variable">balance</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.NArith.BinNat.html#64708cc1fcff61c206ed571fe7828ea8"><span class="id" title="notation">+</span></a> 2<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#returnGenSome"><span class="id" title="definition">returnGenSome</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#addr:36"><span class="id" title="variable">addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#burn"><span class="id" title="constructor">burn</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#amount:38"><span class="id" title="variable">amount</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">N_scope</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Main&nbsp;generator.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iTokenBuggyGens.giTokenBuggyAction" class="idref" href="#iTokenBuggyGens.giTokenBuggyAction"><span class="id" title="definition">giTokenBuggyAction</span></a> (<a id="env:39" class="idref" href="#env:39"><span class="id" title="binder">env</span></a> : <a class="idref" href="ConCert.Execution.Blockchain.html#Environment"><span class="id" title="record">Environment</span></a>) : <span class="id" title="definition">GOpt</span> <a class="idref" href="ConCert.Execution.Blockchain.html#Action"><span class="id" title="record">Action</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="call:43" class="idref" href="#call:43"><span class="id" title="binder">call</span></a> <a id="caller_addr:40" class="idref" href="#caller_addr:40"><span class="id" title="binder">caller_addr</span></a> <a id="contract_addr:41" class="idref" href="#contract_addr:41"><span class="id" title="binder">contract_addr</span></a> <a id="msg:42" class="idref" href="#msg:42"><span class="id" title="binder">msg</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Test.TestUtils.html#returnGenSome"><span class="id" title="definition">returnGenSome</span></a> {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#act_origin"><span class="id" title="projection">act_origin</span></a> := <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#caller_addr:40"><span class="id" title="variable">caller_addr</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#act_from"><span class="id" title="projection">act_from</span></a> := <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#caller_addr:40"><span class="id" title="variable">caller_addr</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Execution.Blockchain.html#act_body"><span class="id" title="projection">act_body</span></a> := <a class="idref" href="ConCert.Execution.Blockchain.html#act_call"><span class="id" title="constructor">act_call</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#contract_addr:41"><span class="id" title="variable">contract_addr</span></a> 0%<span class="id" title="var">Z</span> (<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.serializeMsg"><span class="id" title="definition">serializeMsg</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#msg:42"><span class="id" title="variable">msg</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="state:44" class="idref" href="#state:44"><span class="id" title="binder">state</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">&lt;-</span></a> <span class="id" title="axiom">returnGen</span> (<a class="idref" href="ConCert.Execution.Test.TestUtils.html#get_contract_state"><span class="id" title="definition">get_contract_state</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggy.html#State"><span class="id" title="record">iTokenBuggy.State</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#env:39"><span class="id" title="variable">env</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#Info.contract_addr"><span class="id" title="axiom">contract_addr</span></a>) <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#b6e01f6dc1271ceaf89c61d9a4b57ac8"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">backtrack</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;mint&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:47" class="idref" href="#pat:47"><span class="id" title="binder">(</span></a><a id="pat:47" class="idref" href="#pat:47"><span class="id" title="binder">caller</span></a><a id="pat:47" class="idref" href="#pat:47"><span class="id" title="binder">,</span></a> <a id="pat:47" class="idref" href="#pat:47"><span class="id" title="binder">msg</span></a><a id="pat:47" class="idref" href="#pat:47"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.gMint"><span class="id" title="definition">gMint</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#env:39"><span class="id" title="variable">env</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:44"><span class="id" title="variable">state</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#call:43"><span class="id" title="variable">call</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#caller:46"><span class="id" title="variable">caller</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#Info.contract_addr"><span class="id" title="axiom">contract_addr</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#msg:45"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;burn&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:50" class="idref" href="#pat:50"><span class="id" title="binder">(</span></a><a id="pat:50" class="idref" href="#pat:50"><span class="id" title="binder">caller</span></a><a id="pat:50" class="idref" href="#pat:50"><span class="id" title="binder">,</span></a> <a id="pat:50" class="idref" href="#pat:50"><span class="id" title="binder">msg</span></a><a id="pat:50" class="idref" href="#pat:50"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.gBurn"><span class="id" title="definition">gBurn</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:44"><span class="id" title="variable">state</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#call:43"><span class="id" title="variable">call</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#caller:49"><span class="id" title="variable">caller</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#Info.contract_addr"><span class="id" title="axiom">contract_addr</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#msg:48"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;transfer_from&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>4<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">(</span></a><a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">caller</span></a><a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">,</span></a> <a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">msg</span></a><a id="pat:53" class="idref" href="#pat:53"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.gTransfer_from"><span class="id" title="definition">gTransfer_from</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:44"><span class="id" title="variable">state</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#call:43"><span class="id" title="variable">call</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#caller:52"><span class="id" title="variable">caller</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#Info.contract_addr"><span class="id" title="axiom">contract_addr</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#msg:51"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;approve&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>2<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">'</span></a><a id="pat:56" class="idref" href="#pat:56"><span class="id" title="binder">(</span></a><a id="pat:56" class="idref" href="#pat:56"><span class="id" title="binder">caller</span></a><a id="pat:56" class="idref" href="#pat:56"><span class="id" title="binder">,</span></a> <a id="pat:56" class="idref" href="#pat:56"><span class="id" title="binder">msg</span></a><a id="pat:56" class="idref" href="#pat:56"><span class="id" title="binder">)</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens.gApprove"><span class="id" title="definition">gApprove</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#state:44"><span class="id" title="variable">state</span></a> <a class="idref" href="https://coq-community.org/coq-ext-lib/v0.11.7/ExtLib.Structures.Monad.html#9d6c3e66ed5a7d11a2cd0c5e68ec6163"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#call:43"><span class="id" title="variable">call</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#caller:55"><span class="id" title="variable">caller</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#Info.contract_addr"><span class="id" title="axiom">contract_addr</span></a> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#msg:54"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.1/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ConCert.Examples.iTokenBuggy.iTokenBuggyGens.html#iTokenBuggyGens"><span class="id" title="module">iTokenBuggyGens</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="https://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a> and <a href="https://github.com/jgallen23/toc">TOC</a>
</div>
</div>
<script>
  const elements = document.getElementsByClassName("libtitle");
  while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
  }
  if (window.location.pathname.endsWith("/toc.html")) {
      const jstocDiv = document.getElementById("js-toc");
      jstocDiv.classList.remove("toc");
      jstocDiv.classList.add("jstoc-hidden");
      const jstocHeaderDiv = document.getElementById("js-toc-header");
      jstocHeaderDiv.classList.add("jstoc-hidden");
      const mainDiv = document.getElementById("main");
      mainDiv.classList.add("jstoc-hidden-main");
      const toggleDiv = document.getElementById("toggle-toc");
      toggleDiv.classList.add("jstoc-hidden");
  }
  console.log(window.location.pathname);
</script>
<script type="text/javascript" src="toc.js"></script>
</body>

</html>
